import{j as e,f,a as C,B as j}from"./index-KtrVGIDC.js";import{r as h,R as E,u as S}from"./router-CF4w8fas.js";import{a as P}from"./orderService-BNVRGs-a.js";import{a as L}from"./userService-CeeJh1aS.js";import"./state-CToor5Tf.js";const b={pending:{label:"Pendiente",color:"bg-yellow-500",icon:"â³",description:"Tu pedido estÃ¡ siendo revisado"},confirmed:{label:"Confirmado",color:"bg-blue-500",icon:"âœ“",description:"Pago verificado, pronto prepararemos tu pedido"},processing:{label:"Preparando",color:"bg-purple-500",icon:"ðŸ“¦",description:"Estamos empacando tu pedido"},shipped:{label:"Enviado",color:"bg-indigo-500",icon:"ðŸšš",description:"Tu pedido estÃ¡ en camino"},delivered:{label:"Entregado",color:"bg-green-500",icon:"âœ…",description:"Â¡Pedido entregado!"},cancelled:{label:"Cancelado",color:"bg-red-500",icon:"âŒ",description:"Este pedido fue cancelado"}},w=["pending","confirmed","processing","shipped","delivered"],T=({userId:c})=>{const[g,i]=h.useState([]),[p,l]=h.useState(!0),[d,v]=h.useState(null);h.useEffect(()=>{(async()=>{try{const r=await P(c);i(r)}catch{}finally{l(!1)}})()},[c]);const x=a=>a==="cancelled"?-1:w.indexOf(a);return p?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-gold-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-stone-600",children:"Cargando pedidos..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-6xl mb-4",children:"ðŸ“¦"}),e.jsx("h3",{className:"text-xl font-bold text-black mb-2",children:"No tienes pedidos aÃºn"}),e.jsx("p",{className:"text-stone-500",children:"Cuando realices una compra, podrÃ¡s rastrear tus pedidos aquÃ­"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"Mis Pedidos"}),g.map(a=>{const r=d===a.id,u=x(a.status);return e.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-stone-50 transition-colors",onClick:()=>v(r?null:a.id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex -space-x-2",children:a.items.slice(0,3).map((n,m)=>e.jsx("img",{src:n.productImage,alt:"",className:"w-12 h-12 rounded-lg border-2 border-white object-cover"},m))}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-black",children:a.id}),e.jsx("p",{className:"text-sm text-stone-500",children:a.createdAt.toLocaleDateString("es-PE",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-white text-sm font-bold ${b[a.status].color}`,children:[b[a.status].icon," ",b[a.status].label]}),e.jsx("span",{className:"font-bold text-gold-600",children:f(a.total)}),e.jsx("svg",{className:`w-5 h-5 text-stone-400 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),r&&e.jsxs("div",{className:"border-t border-stone-200 p-6 space-y-6 bg-stone-50",children:[a.status!=="cancelled"&&e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-stone-200",children:[e.jsx("h4",{className:"font-bold text-black mb-4",children:"Estado del EnvÃ­o"}),e.jsx("div",{className:"flex items-center justify-between",children:w.map((n,m)=>e.jsxs(E.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg ${m<=u?b[n].color+" text-white":"bg-stone-200 text-stone-400"}`,children:b[n].icon}),e.jsx("span",{className:`text-xs mt-2 font-medium ${m<=u?"text-black":"text-stone-400"}`,children:b[n].label})]}),m<w.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded ${m<u?"bg-green-500":"bg-stone-200"}`})]},n))}),e.jsx("p",{className:"text-center text-stone-600 mt-4 text-sm",children:b[a.status].description})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-stone-200",children:[e.jsx("h4",{className:"font-bold text-black mb-4",children:"Productos"}),e.jsx("div",{className:"space-y-3",children:a.items.map((n,m)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:n.productImage,alt:"",className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-black",children:n.productName}),e.jsxs("p",{className:"text-sm text-stone-500",children:["Cantidad: ",n.quantity]})]}),e.jsx("p",{className:"font-bold text-gold-600",children:f(n.price*n.quantity)})]},m))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-stone-200",children:[e.jsx("h4",{className:"font-bold text-black mb-2",children:"DirecciÃ³n de EnvÃ­o"}),e.jsx("p",{className:"text-sm text-stone-700",children:a.shippingAddress.address}),e.jsxs("p",{className:"text-sm text-stone-500",children:[a.shippingAddress.district,", ",a.shippingAddress.city]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-stone-200",children:[e.jsx("h4",{className:"font-bold text-black mb-2",children:"Resumen"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-stone-500",children:"Subtotal"}),e.jsx("span",{children:f(a.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-stone-500",children:"EnvÃ­o"}),e.jsx("span",{children:a.shipping===0?"GRATIS":f(a.shipping)})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-gold-600",children:f(a.total)})]})]})]})]})]})]},a.id)})]})},U=({cart:c})=>{const g=S(),[i,p]=h.useState("profile"),l=C(t=>t.user),[d,v]=h.useState({firstName:l?.firstName||"",lastName:l?.lastName||"",email:l?.email||"",phone:l?.phone||"",documentType:"DNI",documentNumber:"",addresses:[]}),[x,a]=h.useState(!1);h.useEffect(()=>{(async()=>{if(!l?.id)return;const o=await L(l.id);o&&v({firstName:o.firstName||l.firstName,lastName:o.lastName||l.lastName,email:o.email||l.email,phone:o.phone||l.phone,documentType:o.documentType||"DNI",documentNumber:o.documentNumber||"",addresses:o.addresses||[]})})()},[l]);const[r,u]=h.useState({current:"",new:"",confirm:""}),n=t=>{t.preventDefault(),a(!1),alert("Datos actualizados correctamente.")},m=t=>{if(t.preventDefault(),r.new.length<8){alert("La contraseÃ±a debe tener al menos 8 caracteres.");return}if(r.new!==r.confirm){alert("Las nuevas contraseÃ±as no coinciden.");return}alert("Procesando encriptaciÃ³n bcrypt..."),setTimeout(()=>{alert("Tu contraseÃ±a ha sido actualizada correctamente."),u({current:"",new:"",confirm:""})},1e3)},y=()=>{window.confirm(`Â¿ESTÃS SEGURO?

Esta acciÃ³n eliminarÃ¡ permanentemente tu cuenta, historial de pedidos y datos personales. Esta acciÃ³n no se puede deshacer.`)&&(alert("Eliminando datos..."),setTimeout(()=>{alert("Tu cuenta ha sido eliminada. Lamentamos verte partir."),g("/"),window.location.reload()},1500))},k=()=>e.jsxs("div",{className:s.sidebar.container,children:[e.jsx("div",{className:s.sidebar.header,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:s.sidebar.avatar,children:[d.firstName.charAt(0),d.lastName.charAt(0)]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-black",children:d.firstName}),e.jsx("p",{className:"text-xs text-stone-600 font-medium",children:"Miembro desde 2024"})]})]})}),e.jsxs("nav",{className:s.sidebar.nav,children:[e.jsxs("button",{onClick:()=>p("profile"),className:N(i==="profile"),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Datos Personales"]}),e.jsxs("button",{onClick:()=>p("orders"),className:N(i==="orders"),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"Mis Pedidos"]}),e.jsxs("button",{onClick:()=>p("shipping"),className:N(i==="shipping"),children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Direcciones de EnvÃ­o"]}),e.jsxs("button",{onClick:()=>p("security"),className:N(i==="security"),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Seguridad & Privacidad"]}),e.jsxs("button",{onClick:()=>p("cart"),className:N(i==="cart"),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Mi Carrito Activo",c.length>0&&e.jsx("span",{className:s.sidebar.cartBadge,children:c.reduce((t,o)=>t+o.quantity,0)})]})]})]});return e.jsxs("div",{className:s.layout.container,children:[e.jsx("h1",{className:s.layout.title,children:"Mi Cuenta"}),e.jsxs("div",{className:s.layout.grid,children:[k(),e.jsxs("div",{className:"flex-1",children:[i==="orders"&&e.jsx(T,{userId:"current-user"}),i==="profile"&&e.jsxs("div",{className:s.card.container,children:[e.jsxs("div",{className:s.card.header,children:[e.jsx("h2",{className:s.card.title,children:"Datos Personales"}),e.jsx(j,{variant:"outline",onClick:()=>a(!x),className:"text-sm",children:x?"Cancelar":"Editar Datos"})]}),e.jsxs("form",{onSubmit:n,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"Nombres"}),e.jsx("input",{type:"text",disabled:!x,defaultValue:d.firstName,className:s.form.input})]}),e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"Apellidos"}),e.jsx("input",{type:"text",disabled:!x,defaultValue:d.lastName,className:s.form.input})]}),e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"Tipo de Documento"}),e.jsxs("select",{disabled:!x,defaultValue:d.documentType,className:s.form.input,children:[e.jsx("option",{value:"DNI",children:"DNI"}),e.jsx("option",{value:"RUC",children:"RUC"}),e.jsx("option",{value:"CE",children:"Carnet ExtranjerÃ­a"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"NÃºmero de Documento"}),e.jsx("input",{type:"text",disabled:!x,defaultValue:d.documentNumber,className:s.form.input})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:s.form.label,children:"Correo ElectrÃ³nico"}),e.jsx("input",{type:"email",disabled:!0,defaultValue:d.email,className:s.form.disabledInput}),e.jsx("p",{className:"text-xs text-stone-500 mt-1",children:"Para cambiar tu correo, contacta a soporte."})]}),x&&e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx(j,{type:"submit",children:"Guardar Cambios"})})]})]}),i==="shipping"&&e.jsxs("div",{className:s.card.container,children:[e.jsxs("div",{className:s.card.header,children:[e.jsx("h2",{className:s.card.title,children:"Mis Direcciones"}),e.jsx(j,{className:"text-sm",children:"Nueva DirecciÃ³n"})]}),e.jsx("div",{className:"space-y-4",children:d.addresses.map(t=>e.jsxs("div",{className:s.address.card,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-bold text-black",children:[t.district,", ",t.province]}),e.jsx("span",{className:s.address.badge,children:"Principal"})]}),e.jsx("p",{className:"text-stone-800 font-medium",children:t.street}),e.jsx("p",{className:"text-sm text-stone-600 mt-1",children:t.department}),t.reference&&e.jsxs("p",{className:"text-xs text-stone-500 mt-2 italic",children:["Ref: ",t.reference]})]}),e.jsxs("div",{className:s.address.actions,children:[e.jsx("button",{className:"text-gold-700 hover:text-gold-900 text-sm font-bold",children:"Editar"}),e.jsx("button",{className:"text-red-600 hover:text-red-800 text-sm font-bold",children:"Eliminar"})]})]},t.id))})]}),i==="security"&&e.jsxs("div",{className:s.card.container,children:[e.jsx("h2",{className:`${s.card.title} mb-6`,children:"GestiÃ³n de ContraseÃ±a"}),e.jsxs("form",{onSubmit:m,className:"max-w-md space-y-4 mb-12",children:[e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"ContraseÃ±a Actual"}),e.jsx("input",{type:"password",required:!0,value:r.current,onChange:t=>u({...r,current:t.target.value}),className:s.form.input})]}),e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"Nueva ContraseÃ±a"}),e.jsx("input",{type:"password",required:!0,minLength:8,value:r.new,onChange:t=>u({...r,new:t.target.value}),className:s.form.input}),e.jsx("p",{className:"text-xs text-stone-500 mt-1 font-medium",children:"MÃ­nimo 8 caracteres."})]}),e.jsxs("div",{children:[e.jsx("label",{className:s.form.label,children:"Confirmar Nueva ContraseÃ±a"}),e.jsx("input",{type:"password",required:!0,minLength:8,value:r.confirm,onChange:t=>u({...r,confirm:t.target.value}),className:s.form.input})]}),e.jsx(j,{type:"submit",children:"Actualizar ContraseÃ±a"})]}),e.jsxs("div",{className:"border-t border-stone-200 pt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-red-700 mb-4",children:"Zona de Peligro"}),e.jsxs("div",{className:s.dangerZone.container,children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-900",children:"Eliminar Cuenta"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1 max-w-lg font-medium",children:["Al eliminar tu cuenta, se borrarÃ¡n todos tus datos personales, direcciones guardadas, mÃ©todos de pago e historial de pedidos. Esta acciÃ³n ",e.jsx("strong",{children:"no se puede deshacer"}),"."]})]}),e.jsx(j,{variant:"danger",onClick:y,children:"Eliminar mi Cuenta"})]})]})]}),i==="cart"&&e.jsxs("div",{className:s.card.container,children:[e.jsx("h2",{className:`${s.card.title} mb-6`,children:"Carrito Guardado"}),c.length===0?e.jsx("p",{className:"text-stone-500 font-medium",children:"No tienes productos en tu carrito."}):e.jsxs("div",{className:"space-y-6",children:[c.map(t=>e.jsxs("div",{className:s.cartItem.container,children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:s.cartItem.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-black",children:t.name}),e.jsx("p",{className:"text-sm text-stone-600 font-medium",children:t.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-4",children:[e.jsx("span",{className:"font-bold text-gold-700",children:f(t.price)}),e.jsxs("span",{className:"text-sm text-stone-500 font-medium",children:["x ",t.quantity]})]})]})]},t.id)),e.jsxs("div",{className:s.cartItem.totalRow,children:[e.jsx("span",{className:"text-lg font-bold text-black",children:"Total Estimado"}),e.jsx("span",{className:"text-2xl font-bold text-gold-700",children:f(c.reduce((t,o)=>t+o.price*o.quantity,0))})]}),e.jsx(j,{className:"w-full",children:"Proceder al Pago"})]})]})]})]})]})},N=c=>`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center gap-3 ${c?"bg-gold-100 text-black font-bold":"text-stone-700 hover:bg-stone-50"}`,s={layout:{container:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",title:"text-3xl font-bold text-black mb-8",grid:"flex flex-col md:flex-row gap-8"},sidebar:{container:"w-full md:w-64 bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden h-fit",header:"p-6 bg-gold-50 border-b border-gold-200",avatar:"w-12 h-12 rounded-full bg-gold-500 text-black flex items-center justify-center font-bold text-xl border-2 border-gold-400 shadow-sm",nav:"p-2",cartBadge:"ml-auto bg-black text-gold-500 text-xs px-2 py-0.5 rounded-full font-bold"},card:{container:"bg-white rounded-xl shadow-sm border border-stone-200 p-8",header:"flex justify-between items-center mb-6",title:"text-xl font-bold text-black"},form:{label:"block text-sm font-bold text-stone-900 mb-1",input:"w-full px-4 py-2 border border-stone-300 rounded-lg bg-[#fcfcfc] disabled:text-stone-600 text-black font-medium focus:ring-2 focus:ring-gold-500 outline-none",disabledInput:"w-full px-4 py-2 border border-stone-300 rounded-lg bg-stone-100 text-stone-500 cursor-not-allowed font-medium"},address:{card:"border border-stone-200 rounded-lg p-4 hover:border-gold-300 transition-colors flex justify-between items-start group",badge:"bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full font-bold",actions:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},dangerZone:{container:"border border-red-200 bg-red-50 rounded-lg p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},cartItem:{container:"flex gap-4 border-b border-stone-100 pb-4 last:border-0",image:"w-24 h-24 object-cover rounded-lg bg-stone-100",totalRow:"pt-4 border-t border-stone-200 flex justify-between items-center"}};export{U as default};
