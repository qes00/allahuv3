const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminPanel-DzMjNFOr.js","assets/router-CF4w8fas.js","assets/orderService-BNVRGs-a.js","assets/userService-CeeJh1aS.js","assets/charts-DZsPsesR.js","assets/state-CToor5Tf.js","assets/AdminLoginPage-BzKfF0oL.js","assets/UserPanel-D-qpBVfF.js","assets/CheckoutPage-kaBZ1Xke.js","assets/ResetPasswordPage-M7gcKbz1.js"])))=>i.map(i=>d[i]);
var xs=Object.defineProperty;var ws=(t,e,r)=>e in t?xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ie=(t,e,r)=>ws(t,typeof e!="symbol"?e+"":e,r);import{a as _s,d as js,g as lt,r as j,u as qr,R as ne,L as H,H as ks,e as Ss,f as Y,N as rr,h as Es,i as Ts}from"./router-CF4w8fas.js";import{c as Mr}from"./state-CToor5Tf.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ht={exports:{}},Le={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sr;function Ns(){if(sr)return Le;sr=1;var t=_s(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,p={},m=null,h=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(h=c.ref);for(u in c)s.call(c,u)&&!i.hasOwnProperty(u)&&(p[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)p[u]===void 0&&(p[u]=c[u]);return{$$typeof:e,type:l,key:m,ref:h,props:p,_owner:a.current}}return Le.Fragment=r,Le.jsx=o,Le.jsxs=o,Le}var nr;function Cs(){return nr||(nr=1,ht.exports=Ns()),ht.exports}var n=Cs(),Xe={},ir;function As(){if(ir)return Xe;ir=1;var t=js();return Xe.createRoot=t.createRoot,Xe.hydrateRoot=t.hydrateRoot,Xe}var Os=As();const Rs=lt(Os),Ps="modulepreload",Is=function(t){return"/"+t},ar={},Ge=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=o(r.map(d=>{if(d=Is(d),d in ar)return;ar[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Ps,u||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((h,g)=>{m.addEventListener("load",h),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function ct(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function $s(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(p){o(p)}}function c(u){try{d(s.throw(u))}catch(p){o(p)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})}const Ls=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Gt extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Us extends Gt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class or extends Gt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lr extends Gt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var At;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(At||(At={}));class Ds{constructor(e,{headers:r={},customFetch:s,region:a=At.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=Ls(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $s(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:c,body:d,signal:u,timeout:p}=s;let m={},{region:h}=s;h||(h=this.region);const g=new URL(`${this.url}/${r}`);h&&h!=="any"&&(m["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let f;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",f=d):typeof d=="string"?(m["Content-Type"]="text/plain",f=d):typeof FormData<"u"&&d instanceof FormData?f=d:(m["Content-Type"]="application/json",f=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?f=JSON.stringify(d):f=d;let v=u;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),u?(v=o.signal,u.addEventListener("abort",()=>o.abort())):v=o.signal);const y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:f,signal:v}).catch(A=>{throw new Us(A)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new or(y);if(!y.ok)throw new lr(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"||b==="application/pdf"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof lr||l instanceof or?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Bs=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},qs=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,d=i.status,u=i.statusText;if(i.ok){var p,m;if(r.method!=="HEAD"){var h;const y=await i.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const f=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),v=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");f&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,u="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const f=await i.text();try{o=JSON.parse(f),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,u="OK")}catch{i.status===404&&f===""?(d=204,u="No Content"):o={message:f}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,d=200,u="OK"),o&&r.shouldThrowOnError)throw new Bs(o)}return{error:o,data:l,count:c,status:d,statusText:u}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i?.cause;if(c){var d,u,p,m;const g=(d=c?.message)!==null&&d!==void 0?d:"",f=(u=c?.code)!==null&&u!==void 0?u:"";l=`${(p=i?.name)!==null&&p!==void 0?p:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(m=c?.name)!==null&&m!==void 0?m:"Error"}: ${g}`,f&&(l+=` (${f})`),c?.stack&&(l+=`
${c.stack}`)}else{var h;l=(h=i?.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},Ms=class extends qs{select(t){let e=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const cr=new RegExp("[,()]");var Ce=class extends Ms{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&cr.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(s=>typeof s=="string"&&cr.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},zs=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:s}=e??{},a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),s&&c.append("Prefer",`count=${s}`),new Ce({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var s;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",c.join(","))}}return new Ce({method:a,url:i,headers:o,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),s&&c.append("Prefer",`count=${s}`),a||c.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);l.searchParams.set("columns",u.join(","))}}return new Ce({method:o,url:l,headers:c,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var r;const s="PATCH",{url:a,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Ce({method:s,url:a,headers:i,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Ce({method:r,url:s,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Fs=class zr{constructor(e,{headers:r={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new zs(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new zr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;const u=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(u)),p=s&&Object.values(r).some(u);p?(l="POST",d=r):s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([h,g])=>g!==void 0).map(([h,g])=>[h,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([h,g])=>{c.searchParams.append(h,g)})):(l="POST",d=r);const m=new Headers(this.headers);return p?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new Ce({method:l,url:c,headers:m,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Ws{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const s=r.versions;if(s&&s.node){const a=s.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hs="2.91.1",Vs=`realtime-js/${Hs}`,Ks="1.0.0",Fr="2.0.0",dr=Fr,Ot=1e4,Gs=1e3,Js=100;var de;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(de||(de={}));var q;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(q||(q={}));var te;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(te||(te={}));var Rt;(function(t){t.websocket="websocket"})(Rt||(Rt={}));var ge;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ge||(ge={}));class Ys{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const a=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var r,s;const a=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,s){var a,i;const o=e.topic,l=(a=e.ref)!==null&&a!==void 0?a:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",d=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+p.length,h=new ArrayBuffer(this.HEADER_LENGTH+m);let g=new DataView(h),f=0;g.setUint8(f++,this.KINDS.userBroadcastPush),g.setUint8(f++,c.length),g.setUint8(f++,l.length),g.setUint8(f++,o.length),g.setUint8(f++,d.length),g.setUint8(f++,p.length),g.setUint8(f++,r),Array.from(c,y=>g.setUint8(f++,y.charCodeAt(0))),Array.from(l,y=>g.setUint8(f++,y.charCodeAt(0))),Array.from(o,y=>g.setUint8(f++,y.charCodeAt(0))),Array.from(d,y=>g.setUint8(f++,y.charCodeAt(0))),Array.from(p,y=>g.setUint8(f++,y.charCodeAt(0)));var v=new Uint8Array(h.byteLength+s.byteLength);return v.set(new Uint8Array(h),0),v.set(new Uint8Array(s),h.byteLength),v.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,i,o,l,c]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodeUserBroadcast(e,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=s.decode(e.slice(c,c+a));c=c+a;const u=s.decode(e.slice(c,c+i));c=c+i;const p=s.decode(e.slice(c,c+o));c=c+o;const m=e.slice(c,e.byteLength),h=l===this.JSON_ENCODING?JSON.parse(s.decode(m)):m,g={type:this.BROADCAST_EVENT,event:u,payload:h};return o>0&&(g.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class Wr{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var I;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(I||(I={}));const ur=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Qs(o,t,e,a),i),{}):{}},Qs=(t,e,r,s)=>{const a=e.find(l=>l.name===t),i=a?.type,o=r[t];return i&&!s.includes(i)?Hr(i,o):Pt(o)},Hr=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return tn(e,r)}switch(t){case I.bool:return Xs(e);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return Zs(e);case I.json:case I.jsonb:return en(e);case I.timestamp:return rn(e);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:return Pt(e);default:return Pt(e)}},Pt=t=>t,Xs=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zs=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},en=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},tn=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Hr(e,l))}return t},rn=t=>typeof t=="string"?t.replace(" ","T"):t,Vr=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ft{constructor(e,r,s={},a=Ot){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hr;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hr||(hr={}));class qe{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qe.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=qe.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=qe.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const p=i[d];if(p){const m=u.map(v=>v.presence_ref),h=p.map(v=>v.presence_ref),g=u.filter(v=>h.indexOf(v.presence_ref)<0),f=p.filter(v=>m.indexOf(v.presence_ref)<0);g.length>0&&(l[d]=g),f.length>0&&(c[d]=f)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(e,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const p=e[l].map(h=>h.presence_ref),m=u.filter(h=>p.indexOf(h.presence_ref)<0);e[l].unshift(...m)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(p=>p.presence_ref);d=d.filter(p=>u.indexOf(p.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fr;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fr||(fr={}));var Me;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Me||(Me={}));var ae;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ae||(ae={}));class Re{constructor(e,r={config:{}},s){var a,i;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ft(this,te.join,this.params,this.timeout),this.rejoinTimer=new Wr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=q.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(te.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new qe(this),this.broadcastEndpointURL=Vr(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==q.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Me.PRESENCE]&&this.bindings[Me.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(h=>e?.(ae.CHANNEL_ERROR,h)),this._onClose(()=>e?.(ae.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){e?.(ae.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,v=(g=f?.length)!==null&&g!==void 0?g:0,y=[];for(let x=0;x<v;x++){const b=f[x],{filter:{event:w,schema:A,table:E,filter:O}}=b,J=h&&h[x];if(J&&J.event===w&&Re.isFilterValueEqual(J.schema,A)&&Re.isFilterValueEqual(J.table,E)&&Re.isFilterValueEqual(J.filter,O))y.push(Object.assign(Object.assign({},b),{id:J.id}));else{this.unsubscribe(),this.state=q.errored,e?.(ae.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ae.SUBSCRIBED);return}}).receive("error",h=>{this.state=q.errored,e?.(ae.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(ae.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===q.joined&&e===Me.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=q.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(te.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new ft(this,te.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=q.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ft(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Js){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=te;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var g,f,v;return((g=h.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(f=h.filter)===null||f===void 0?void 0:f.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(h=>h.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var g,f,v,y,x,b,w,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const E=h.id,O=(g=h.filter)===null||g===void 0?void 0:g.event;return E&&((f=r.ids)===null||f===void 0?void 0:f.includes(E))&&(O==="*"||O?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((y=h.filter)===null||y===void 0)&&y.table)||h.filter.table===((x=r.data)===null||x===void 0?void 0:x.table))}else{const E=(w=(b=h?.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return E==="*"||E===((A=r?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:f,table:v,commit_timestamp:y,type:x,errors:b}=g;m=Object.assign(Object.assign({},{schema:f,table:v,commit_timestamp:y,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(g))}h.callback(m,s)})}_isClosed(){return this.state===q.closed}_isJoined(){return this.state===q.joined}_isJoining(){return this.state===q.joining}_isLeaving(){return this.state===q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Re.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(te.close,{},e)}_onError(e){this._on(te.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ur(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ur(e.columns,e.old_record)),r}}const pt=()=>{},Ze={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sn=[1e3,2e3,5e3,1e4],nn=1e4,an=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class on{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ot,this.transport=null,this.heartbeatIntervalMs=Ze.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pt,this.ref=0,this.reconnectTimer=null,this.vsn=dr,this.logger=pt,this.conn=null,this.sendBuffer=[],this.serializer=new Ys,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Rt.websocket}`,this.httpEndpoint=Vr(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ws.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case de.connecting:return ge.Connecting;case de.open:return ge.Open;case de.closing:return ge.Closing;default:return ge.Closed}}isConnected(){return this.connectionState()===ge.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Re(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Gs,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ze.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===de.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===de.open||this.conn.readyState===de.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(te.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([an],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,s=!1;if(e)r=e,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:Vs};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(te.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Wr(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ze.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,i,o,l,c,d,u,p,m,h;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Ot,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Ze.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:pt,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:dr,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(g=>sn[g-1]||nn),this.vsn){case Ks:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((g,f)=>f(JSON.stringify(g))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:((g,f)=>f(JSON.parse(g)));break;case Fr:this.encode=(m=e?.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(h=e?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var ze=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ln(t,e,r){const s=new URL(e,t);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function cn(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function dn(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const l=ln(t.baseUrl,s,a),c=await cn(t.auth),d=await e(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),u=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),m=p&&u?JSON.parse(u):u;if(!d.ok){const h=p?m:void 0,g=h?.error;throw new ze(g?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:g?.type,icebergCode:g?.code,details:h})}return{status:d.status,headers:d.headers,data:m}}}}function et(t){return t.join("")}var un=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:et(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${et(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${et(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${et(t.namespace)}`}),!0}catch(e){if(e instanceof ze&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof ze&&r.status===409)return;throw r}}};function _e(t){return t.join("")}var hn=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_e(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_e(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_e(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_e(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_e(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_e(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof ze&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof ze&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},fn=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=dn({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new un(this.client,e),this.tableOps=new hn(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},dt=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function $(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var pn=class extends dt{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},It=class extends dt{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Jt=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mn=()=>Response,$t=t=>{if(Array.isArray(t))return t.map(r=>$t(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=$t(s)}),e},gn=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vn=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Fe(t){"@babel/helpers - typeof";return Fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(t)}function bn(t,e){if(Fe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Fe(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yn(t){var e=bn(t,"string");return Fe(e)=="symbol"?e:e+""}function xn(t,e,r){return(e=yn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pr(Object(r),!0).forEach(function(s){xn(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const mt=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},wn=async(t,e,r)=>{t instanceof await mn()&&!r?.noResolveJson?t.json().then(s=>{const a=t.status||500,i=s?.statusCode||a+"";e(new pn(mt(s),a,i))}).catch(s=>{e(new It(mt(s),s))}):e(new It(mt(t),t))},_n=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!s?a:(gn(s)?(a.headers=S({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),S(S({},a),r))};async function Je(t,e,r,s,a,i){return new Promise((o,l)=>{t(r,_n(e,s,a,i)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>wn(c,l,s))})}async function We(t,e,r,s){return Je(t,"GET",e,r,s)}async function ee(t,e,r,s,a){return Je(t,"POST",e,s,a,r)}async function Lt(t,e,r,s,a){return Je(t,"PUT",e,s,a,r)}async function jn(t,e,r,s){return Je(t,"HEAD",e,S(S({},r),{},{noResolveJson:!0}),s)}async function Yt(t,e,r,s,a){return Je(t,"DELETE",e,s,a,r)}var kn=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($(e))return{data:null,error:e};throw e}}};let Kr;Kr=Symbol.toStringTag;var Sn=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Kr]="BlobDownloadBuilder",this.promise=null}asStream(){return new kn(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if($(e))return{data:null,error:e};throw e}}};const En={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Tn=class{constructor(t,e={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Jt(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,s){var a=this;try{let i;const o=S(S({},mr),s);let l=S(S({},a.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s?.headers&&(l=S(S({},l),s.headers));const d=a._removeEmptyFolders(e),u=a._getFinalPath(d),p=await(t=="PUT"?Lt:ee)(a.fetch,`${a.url}/object/${u}`,i,S({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($(i))return{data:null,error:i};throw i}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,s){var a=this;const i=a._removeEmptyFolders(t),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",e);try{let c;const d=S({upsert:mr.upsert},s),u=S(S({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType),{data:{path:i,fullPath:(await Lt(a.fetch,l.toString(),c,{headers:u})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if($(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(t,e){var r=this;try{let s=r._getFinalPath(t);const a=S({},r.headers);e?.upsert&&(a["x-upsert"]="true");const i=await ee(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new dt("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($(s))return{data:null,error:s};throw s}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var s=this;try{return{data:await ee(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($(a))return{data:null,error:a};throw a}}async copy(t,e,r){var s=this;try{return{data:{path:(await ee(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,r){var s=this;try{let a=s._getFinalPath(t),i=await ee(s.fetch,`${s.url}/object/sign/${a}`,S({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,r){var s=this;try{const a=await ee(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>S(S({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($(a))return{data:null,error:a};throw a}}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),a=s?`?${s}`:"",i=this._getFinalPath(t),o=()=>We(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Sn(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:$t(await We(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await jn(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if($(s)&&s instanceof It){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const r=this._getFinalPath(t),s=[],a=e?.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const i=typeof e?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(e?.transform||{});o!==""&&s.push(o);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(t){var e=this;try{return{data:await Yt(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}async list(t,e,r){var s=this;try{const a=S(S(S({},En),e),{},{prefix:t||""});return{data:await ee(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if($(a))return{data:null,error:a};throw a}}async listV2(t,e){var r=this;try{const s=S({},t);return{data:await ee(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},e),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Gr="2.91.1",Jr={"X-Client-Info":`storage-js/${Gr}`};var Nn=class{constructor(t,e={},r,s){this.shouldThrowOnError=!1;const a=new URL(t);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=S(S({},Jr),e),this.fetch=Jt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await We(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await We(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await ee(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var r=this;try{return{data:await Lt(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await ee(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Yt(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Cn=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=S(S({},Jr),e),this.fetch=Jt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ee(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const s=r.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await We(e.fetch,a,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Yt(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if($(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!vn(t))throw new dt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new fn({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(s)throw c;return{data:null,error:c}}}}})}};const Qt={"X-Client-Info":`storage-js/${Gr}`,"Content-Type":"application/json"};var Yr=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function K(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var gt=class extends Yr{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},An=class extends Yr{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Xt=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),On=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Rn=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(i=>{const o=i?.statusCode||i?.code||s+"";e(new gt(gr(i),s,o))}).catch(()=>{const i=s+"";e(new gt(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";e(new gt(a.statusText||`HTTP ${s} error`,s,i))}}else e(new An(gr(t),t))},Pn=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return s?(On(s)?(a.headers=S({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,S(S({},a),r)):a};async function In(t,e,r,s,a,i){return new Promise((o,l)=>{t(r,Pn(e,s,a,i)).then(c=>{if(!c.ok)throw c;if(s?.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>Rn(c,l,s))})}async function G(t,e,r,s,a){return In(t,"POST",e,s,a,r)}var $n=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=S(S({},Qt),e),this.fetch=Xt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await G(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(K(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await G(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(K(s))return{data:null,error:s};throw s}}},Ln=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=S(S({},Qt),e),this.fetch=Xt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await G(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await G(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await G(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}},Un=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=S(S({},Qt),e),this.fetch=Xt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await G(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await G(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(K(r))return{data:null,error:r};throw r}}},Dn=class extends Un{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Bn(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},Bn=class extends $n{constructor(t,e,r,s){super(t,e,s),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new qn(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},qn=class extends Ln{constructor(t,e,r,s,a){super(t,e,a),this.vectorBucketName=r,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,S(S({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Mn=class extends Nn{constructor(t,e={},r,s){super(t,e,r,s)}from(t){return new Tn(this.url,this.headers,t,this.fetch)}get vectors(){return new Dn(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Cn(this.url+"/iceberg",this.headers,this.fetch)}};const Qr="2.91.1",Ae=30*1e3,Ut=3,vt=Ut*Ae,zn="http://localhost:9999",Fn="supabase.auth.token",Wn={"X-Client-Info":`gotrue-js/${Qr}`},Dt="X-Supabase-Api-Version",Xr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vn=600*1e3;class He extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function _(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Kn extends He{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Gn(t){return _(t)&&t.name==="AuthApiError"}class ve extends He{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class oe extends He{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}}class V extends oe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jn(t){return _(t)&&t.name==="AuthSessionMissingError"}class je extends oe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tt extends oe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rt extends oe{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yn(t){return _(t)&&t.name==="AuthImplicitGrantRedirectError"}class vr extends oe{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qn extends oe{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Bt extends oe{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function bt(t){return _(t)&&t.name==="AuthRetryableFetchError"}class br extends oe{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class qt extends oe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yr=` 	
\r=`.split(""),Xn=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yr.length;e+=1)t[yr[e].charCodeAt(0)]=-2;for(let e=0;e<it.length;e+=1)t[it[e].charCodeAt(0)]=e;return t})();function xr(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(it[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(it[s]),e.queuedBits-=6}}function Zr(t,e,r){const s=Xn[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wr(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{ti(o,s,r)};for(let o=0;o<t.length;o+=1)Zr(t.charCodeAt(o),a,i);return e.join("")}function Zn(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ei(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Zn(s,e)}}function ti(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Pe(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Zr(t.charCodeAt(a),r,s);return new Uint8Array(e)}function ri(t){const e=[];return ei(t,r=>e.push(r)),new Uint8Array(e)}function be(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>xr(a,r,s)),xr(null,r,s),e.join("")}function si(t){return Math.round(Date.now()/1e3)+t}function ni(){return Symbol("auth-callback")}const W=()=>typeof window<"u"&&typeof document<"u",he={tested:!1,writable:!1},es=()=>{if(!W())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(he.tested)return he.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),he.tested=!0,he.writable=!0}catch{he.tested=!0,he.writable=!1}return he.writable};function ii(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const ts=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ai=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oe=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},fe=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},z=async(t,e)=>{await t.removeItem(e)};class ut{constructor(){this.promise=new ut.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ut.promiseConstructor=Promise;function yt(t){const e=t.split(".");if(e.length!==3)throw new qt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Hn.test(e[s]))throw new qt("JWT not in base64url format");return{header:JSON.parse(wr(e[0])),payload:JSON.parse(wr(e[1])),signature:Pe(e[2]),raw:{header:e[0],payload:e[1]}}}async function oi(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function li(t,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function ci(t){return("0"+t.toString(16)).substr(-2)}function di(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,ci).join("")}async function ui(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function hi(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return t;const r=await ui(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ke(t,e,r=!1){const s=di();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Oe(t,`${e}-code-verifier`,a);const i=await hi(s);return[i,s===i?"plain":"s256"]}const fi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pi(t){const e=t.headers.get(Dt);if(!e||!e.match(fi))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mi(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function gi(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vi=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Se(t){if(!vi.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xt(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bi(t,e){return new Proxy(t,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!e.value&&typeof s=="string"&&(e.value=!0),Reflect.get(r,s,a)}})}function _r(t){return JSON.parse(JSON.stringify(t))}const me=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yi=[502,503,504];async function jr(t){var e;if(!ai(t))throw new Bt(me(t),0);if(yi.includes(t.status))throw new Bt(me(t),t.status);let r;try{r=await t.json()}catch(i){throw new ve(me(i),i)}let s;const a=pi(t);if(a&&a.getTime()>=Xr["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new br(me(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new V}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new br(me(r),t.status,r.weak_password.reasons);throw new Kn(me(r),t.status||500,s)}const xi=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function k(t,e,r,s){var a;const i=Object.assign({},s?.headers);i[Dt]||(i[Dt]=Xr["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await wi(t,e,r+l,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function wi(t,e,r,s,a,i){const o=xi(e,s,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw new Bt(me(c),0)}if(l.ok||await jr(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await jr(c)}}function Z(t){var e;let r=null;ki(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=si(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function kr(t){const e=Z(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ue(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _i(t){return{data:t,error:null}}function ji(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=t,o=ct(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Sr(t){return t}function ki(t){return t.access_token&&t.refresh_token&&t.expires_in}const wt=["global","local","others"];class Si{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=ts(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=wt[0]){if(wt.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wt.join(", ")}`);try{return await k(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(_(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await k(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ue})}catch(s){if(_(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=ct(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await k(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ji,redirectTo:r?.redirectTo})}catch(r){if(_(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await k(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ue})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Sr});if(u.error)throw u.error;const p=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{const f=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=f}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(_(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Se(e);try{return await k(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ue})}catch(r){if(_(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Se(e);try{return await k(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ue})}catch(s){if(_(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){Se(e);try{return await k(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ue})}catch(s){if(_(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Se(e.userId);try{const{data:r,error:s}=await k(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(_(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Se(e.userId),Se(e.id);try{return{data:await k(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Sr});if(u.error)throw u.error;const p=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{const f=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=f}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(_(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await k(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await k(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(_(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await k(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_(r))return{data:null,error:r};throw r}}}function Er(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ee={debug:!!(globalThis&&es()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ei extends rs{}async function Ti(t,e,r){Ee.debug;const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ee.debug},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Ee.debug;try{return await r()}finally{Ee.debug}}else{if(e===0)throw Ee.debug,new Ei(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ee.debug)try{const i=await globalThis.navigator.locks.query()}catch{}return await r()}}))}function Ni(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ss(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Ci(t){return parseInt(t,16)}function Ai(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Oi(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:p,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=ss(t.address),g=u?`${u}://${s}`:s,f=t.statement?`${t.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${h}

${f}`;let y=`URI: ${p}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let x=`
Resources:`;for(const b of d){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}y+=x}return`${v}
${y}`}class B extends Error{constructor({message:e,code:r,cause:s,name:a}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class at extends B{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ri({error:t,options:e}){var r,s,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new B({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new B({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new B({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new B({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new B({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new B({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new B({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new B({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(ns(o)){if(i.rp.id!==o)return new B({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new B({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new B({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new B({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new B({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Pi({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new B({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new B({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(ns(s)){if(r.rpId!==s)return new B({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new B({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new B({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new B({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Ii{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $i=new Ii;function Li(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,a=ct(t,["challenge","user","excludeCredentials"]),i=Pe(e).buffer,o=Object.assign(Object.assign({},r),{id:Pe(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const d=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Pe(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Ui(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=ct(t,["challenge","allowCredentials"]),a=Pe(e).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Pe(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Di(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:be(new Uint8Array(t.response.attestationObject)),clientDataJSON:be(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bi(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:be(new Uint8Array(a.authenticatorData)),clientDataJSON:be(new Uint8Array(a.clientDataJSON)),signature:be(new Uint8Array(a.signature)),userHandle:a.userHandle?be(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ns(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Tr(){var t,e;return!!(W()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function qi(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new at("Browser returned unexpected credential type",e)}:{data:null,error:new at("Empty credential response",e)}}catch(e){return{data:null,error:Ri({error:e,options:t})}}}async function Mi(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new at("Browser returned unexpected credential type",e)}:{data:null,error:new at("Empty credential response",e)}}catch(e){return{data:null,error:Pi({error:e,options:t})}}}const zi={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Fi={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ot(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(e(o)){const l=s[i];e(l)?s[i]=ot(l,o):s[i]=ot(o)}else s[i]=o}return s}function Wi(t,e){return ot(zi,t,e||{})}function Hi(t,e){return ot(Fi,t,e||{})}class Vi{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const c=a??$i.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${s}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=Wi(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:p}=await qi({publicKey:d,signal:c});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:p}}case"request":{const d=Hi(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:p}=await Mi(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:p}}}}catch(o){return _(o)?{data:null,error:o}:{data:null,error:new ve("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new He("rpId is required for WebAuthn authentication")};try{if(!Tr())return{data:null,error:new ve("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return _(o)?{data:null,error:o}:{data:null,error:new ve("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new He("rpId is required for WebAuthn registration")};try{if(!Tr())return{data:null,error:new ve("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var p;return(p=u.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return _(o)?{data:null,error:o}:{data:null,error:new ve("Unexpected error in register",o)}}}}Ni();const Ki={url:zn,storageKey:Fn,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Nr(t,e,r){return await r()}const Te={};class Ve{get jwks(){var e,r;return(r=(e=Te[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Te[this.storageKey]=Object.assign(Object.assign({},Te[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Te[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Te[this.storageKey]=Object.assign(Object.assign({},Te[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Ki),e);if(this.storageKey=i.storageKey,this.instanceID=(r=Ve.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ve.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&W()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;this.logDebugMessages}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Si({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ts(i.fetch),this.lock=i.lock||Nr,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&W()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Ti:this.lock=Nr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:es()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Er(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Er(this.memoryStorage)),W()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch{}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Qr}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(W()&&(r=ii(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),W()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Yn(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return _(r)?this._returnResult({error:r}):this._returnResult({error:new ve("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const i=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Z}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(_(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,s,a;try{let i;if("email"in e){const{email:u,password:p,options:m}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await ke(this.storage,this.storageKey)),i=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:u,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:h,code_challenge_method:g},xform:Z})}else if("phone"in e){const{phone:u,password:p,options:m}=e;i=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(s=m?.data)!==null&&s!==void 0?s:{},channel:(a=m?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Z})}else throw new tt("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await z(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:kr})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:kr})}else throw new tt("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new je;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,i,o,l,c,d,u,p,m;let h,g;if("message"in e)h=e.message,g=e.signature;else{const{chain:f,wallet:v,statement:y,options:x}=e;let b;if(W())if(typeof v=="object")b=v;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")b=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const w=new URL((r=x?.url)!==null&&r!==void 0?r:window.location.href),A=await b.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=ss(A[0]);let O=(s=x?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!O){const R=await b.request({method:"eth_chainId"});O=Ci(R)}const J={domain:w.host,address:E,statement:y,uri:w.href,version:"1",chainId:O,nonce:(a=x?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=x?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=x?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=x?.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=Oi(J),g=await b.request({method:"personal_sign",params:[Ai(h),E]})}try{const{data:f,error:v}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:g},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Z});if(v)throw v;if(!f||!f.session||!f.user){const y=new je;return this._returnResult({data:{user:null,session:null},error:y})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign({},f),error:v})}catch(f){if(_(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithSolana(e){var r,s,a,i,o,l,c,d,u,p,m,h;let g,f;if("message"in e)g=e.message,f=e.signature;else{const{chain:v,wallet:y,statement:x,options:b}=e;let w;if(W())if(typeof y=="object")w=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const A=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let O;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")O=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)O=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)g=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),f=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${A.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(a=(s=b?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((p=(u=b?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||p===void 0)&&p.length?["Resources",...b.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=E}}try{const{data:v,error:y}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:be(f)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Z});if(y)throw y;if(!v||!v.session||!v.user){const x=new je;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(_(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const r=await fe(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Qn;const{data:i,error:o}=await k(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Z});if(await z(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new je;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=e,l=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Z}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new je;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ke(this.storage,this.storageKey));const{error:p}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:u})}throw new tt("You must provide either an email or phone number.")}catch(l){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,s;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await k(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Z});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(_(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,s,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ke(this.storage,this.storageKey));const d=await k(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:_i});return!((i=d.data)===null||i===void 0)&&i.url&&W()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new V;const{error:a}=await k(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(_(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:o}=await k(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:o,error:l}=await k(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new tt("You must provide either an email or phone number and a type")}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await fe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<vt:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await fe(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=xt()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=bi(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ue}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new V}:await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ue})})}catch(r){if(_(r))return Jn(r)&&(await this._removeSession(),await z(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new V;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ke(this.storage,this.storageKey));const{data:d,error:u}=await k(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ue});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new V;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=yt(e.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(_(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new V;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(_(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!W())throw new rt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new vr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rt("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vr("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new rt("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(l);let m=u+p;c&&(m=parseInt(c)),(m-u)*1e3<=Ae;const g=m-p;u-g>=120||u-g<0;const{data:f,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:d,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(s){if(_(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await fe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Gn(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await z(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=ni(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ke(this.storage,this.storageKey,!0));try{return await k(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:p,error:m}=i;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await k(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return W()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(_(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:u}=e,p=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Z}),{data:m,error:h}=p;return h?this._returnResult({data:{user:null,session:null},error:h}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new je}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:h}))}catch(a){if(await z(this.storage,`${this.storageKey}-code-verifier`),_(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await k(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await li(async a=>(a>0&&await oi(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await k(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Z})),(a,i)=>{const o=200*Math.pow(2,a);return i&&bt(i)&&Date.now()+o-s<Ae})}catch(s){if(this._debug(r,"error",s),_(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),W()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await fe(this.storage,this.storageKey);if(a&&this.userStorage){let o=await fe(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Oe(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:xt()}else if(a&&!a.user&&!a.user){const o=await fe(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await z(this.storage,this.storageKey+"-user"),await Oe(this.storage,this.storageKey,a)):a.user=xt()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<vt;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${vt}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(bt(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new V;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ut;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new V;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),_(i)){const o={data:null,error:i};return bt(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await z(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Oe(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=_r(a);await Oe(this.storage,this.storageKey,i)}else{const a=_r(r);await Oe(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await z(this.storage,this.storageKey),await z(this.storage,this.storageKey+"-code-verifier"),await z(this.storage,this.storageKey+"-user"),this.userStorage&&await z(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&W()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch{}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ae);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Ae);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ae}ms, refresh threshold is ${Ut} ticks`),a<=Ut&&await this._callRefreshToken(s.refresh_token)})}catch{}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rs)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!W()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch{}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ke(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await k(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await k(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&c.type==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Di(e.webauthn.credential_response):Bi(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Li(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Ui(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=yt(s.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await k(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new V})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new V});const o=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&W()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(s){if(_(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new V});const o=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&W()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(s){if(_(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await k(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new V})})}catch(e){if(_(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await k(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new V})})}catch(r){if(_(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+Vn>a)return s;const{data:i,error:o}=await k(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:h,error:g}=await this.getSession();if(g||!h.session)return this._returnResult({data:null,error:g});s=h.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=yt(s);r?.allowExpired||mi(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:h}=await this.getUser(s);if(h)throw h;return{data:{claims:i,header:a,signature:o},error:null}}const u=gi(a.alg),p=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,p,o,ri(`${l}.${c}`)))throw new qt("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(_(s))return this._returnResult({data:null,error:s});throw s}}}Ve.nextInstanceID={};const Gi=Ve,Ji="2.91.1";let Be="";typeof Deno<"u"?Be="deno":typeof document<"u"?Be="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Be="react-native":Be="node";const Yi={"X-Client-Info":`supabase-js-${Be}/${Ji}`},Qi={headers:Yi},Xi={schema:"public"},Zi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ea={};function Ke(t){"@babel/helpers - typeof";return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(t)}function ta(t,e){if(Ke(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ke(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ra(t){var e=ta(t,"string");return Ke(e)=="symbol"?e:e+""}function sa(t,e,r){return(e=ra(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(r),!0).forEach(function(s){sa(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}const na=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ia=()=>Headers,aa=(t,e,r)=>{const s=na(r),a=ia();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let d=new a(o?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,L(L({},o),{},{headers:d}))}};function oa(t){return t.endsWith("/")?t:t+"/"}function la(t,e){var r,s;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:p}=e,m={db:L(L({},c),a),auth:L(L({},d),i),realtime:L(L({},u),o),storage:{},global:L(L(L({},p),l),{},{headers:L(L({},(r=p?.headers)!==null&&r!==void 0?r:{}),(s=l?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function ca(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(oa(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var da=class extends Gi{constructor(t){super(t)}},ua=class{constructor(t,e,r){var s,a;this.supabaseUrl=t,this.supabaseKey=e;const i=ca(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Xi,realtime:ea,auth:L(L({},Zi),{},{storageKey:o}),global:Qi},c=la(r??{},l);if(this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=aa(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(L({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>{}),this.rest=new Fs(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Mn(this.storageUrl.href,this.headers,this.fetch,r?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ds(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:d},u,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new da({url:this.authUrl.href,headers:L(L({},m),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new on(this.realtimeUrl.href,L(L({},t),{},{params:L(L({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const ha=(t,e,r)=>new ua(t,e,r);function fa(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}fa();const pa="https://ltmdgtuohnwdfjjntklo.supabase.co",ma="sb_publishable_VaMt6eywHzn5Opum7ljtdg_tt1i6eHw",U=ha(pa,ma,{auth:{persistSession:!0,autoRefreshToken:!0}}),ye=()=>U!==null,ga=t=>t&&typeof t=="object"&&"message"in t?t.message:"Error desconocido al conectar con la base de datos",Zt=t=>{let e;if(t.images)try{const r=typeof t.images=="string"?JSON.parse(t.images):t.images;e=Array.isArray(r)?r:void 0}catch{e=void 0}return{id:t.id,name:t.name,description:t.description||"",price:t.price,imageUrl:t.image_url||"",images:e,category:t.category||"General",brand:t.brand||void 0,sizes:t.sizes||void 0,colors:t.colors||void 0,isFeatured:t.is_featured||!1}},va=t=>{const e={name:t.name,description:t.description,price:t.price,image_url:t.imageUrl,category:t.category,brand:t.brand,sizes:t.sizes,colors:t.colors};return t.images!==void 0&&(e.images=t.images?JSON.stringify(t.images):void 0),t.isFeatured!==void 0&&(e.is_featured=t.isFeatured),e},ba=async()=>{if(!ye()||!U)return[];const{data:t,error:e}=await U.from("products").select("*").order("created_at",{ascending:!1});return e?[]:(t||[]).map(Zt)},ya=async()=>{if(!ye()||!U)return[];const{data:t,error:e}=await U.from("products").select("*").eq("is_featured",!0).order("created_at",{ascending:!1});return e?[]:(t||[]).map(Zt)},Ro=async(t,e)=>{if(!ye()||!U)return null;const r=va(e);r.updated_at=new Date().toISOString();const{data:s,error:a}=await U.from("products").update(r).eq("id",t).select().single();if(a)throw new Error(ga(a));return s?Zt(s):null},xa="PEN",wa=.18,xe=t=>new Intl.NumberFormat("es-PE",{style:"currency",currency:xa}).format(t),_a=t=>t.images&&t.images.length>0?t.images.find(r=>r.isPrimary)?.url||t.images[0].url:t.imageUrl||"",Ar=t=>t.images&&t.images.length>0?t.images.sort((e,r)=>(e.order||0)-(r.order||0)).map(e=>e.url):t.imageUrl?[t.imageUrl]:[],ja=t=>(t.images?.length||0)>1,ka=(t,e)=>{if(!t.images||t.images.length===0)return t.imageUrl?[t.imageUrl]:[];if(!e)return Ar(t);const r=t.images.filter(s=>s.color===e||!s.color);return r.length>0?r.sort((s,a)=>s.isPrimary&&!a.isPrimary?-1:!s.isPrimary&&a.isPrimary?1:(s.order||0)-(a.order||0)).map(s=>s.url):Ar(t)},Mt=({product:t,onAddToCart:e,onViewProduct:r})=>{const[s,a]=j.useState(!1),[i,o]=j.useState(!1),l=()=>{r&&r(t)},c=_a(t),d=t.images?.find(u=>u.url!==c)?.url;return n.jsxs("div",{className:M.card,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[n.jsxs("div",{className:M.imageContainer,children:[!i&&n.jsx("div",{className:M.skeleton,children:n.jsx("div",{className:"animate-shimmer w-full h-full"})}),n.jsx("img",{src:c,alt:t.name,loading:"lazy",className:`${M.image} ${i?"opacity-100":"opacity-0"} ${s&&d?"opacity-0":"opacity-100"}`,onLoad:()=>o(!0)}),d&&n.jsx("img",{src:d,alt:t.name,loading:"lazy",className:`${M.image} absolute inset-0 transition-opacity duration-500 ease-in-out ${s?"opacity-100":"opacity-0"}`}),n.jsxs("div",{className:`${M.overlay} ${s?"opacity-100":"opacity-0"}`,children:[n.jsxs("button",{onClick:l,className:M.viewButton,children:[n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),n.jsx("span",{children:"Ver"})]}),n.jsx("button",{onClick:()=>e(t),className:M.cartButton,children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),t.brand&&n.jsx("span",{className:M.brandBadge,children:t.brand})]}),n.jsxs("div",{className:M.content,children:[n.jsx("div",{className:M.category,children:t.category}),n.jsx("h3",{className:M.name,children:t.name}),t.colors&&t.colors.length>0&&n.jsx("div",{className:M.variants,children:n.jsxs("div",{className:M.colorDots,children:[t.colors.slice(0,4).map((u,p)=>n.jsx("span",{className:M.colorDot,title:u,style:{backgroundColor:u.toLowerCase()==="blanco"?"#fff":u.toLowerCase()==="negro"?"#1a1a1a":u.toLowerCase()==="azul marino"?"#1e3a5f":u.toLowerCase()==="azul"?"#3b82f6":u.toLowerCase()==="rojo"?"#ef4444":u.toLowerCase()==="verde"?"#22c55e":u.toLowerCase()==="marrn"?"#8b4513":u.toLowerCase()==="beige"?"#f5f5dc":"#cd9f33"}},p)),t.colors.length>4&&n.jsxs("span",{className:M.moreColors,children:["+",t.colors.length-4]})]})}),n.jsx("div",{className:M.priceRow,children:n.jsx("span",{className:M.price,children:xe(t.price)})})]})]})},M={card:"group bg-white rounded-2xl overflow-hidden border border-stone-100 shadow-sm hover:shadow-gold-lg transition-all duration-500 hover:-translate-y-2",imageContainer:"relative h-52 md:h-60 overflow-hidden bg-gradient-to-br from-stone-100 to-stone-50",skeleton:"absolute inset-0 bg-stone-100",image:"w-full h-full object-cover transition-all duration-700 group-hover:scale-110",overlay:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent flex items-end justify-center gap-3 pb-6 transition-opacity duration-300",viewButton:"flex items-center gap-2 px-4 py-2 bg-white text-black font-bold text-sm rounded-full hover:bg-gold-500 transition-colors",cartButton:"flex items-center justify-center w-10 h-10 bg-gold-500 text-black rounded-full hover:bg-gold-400 transition-colors",brandBadge:"absolute top-3 left-3 px-3 py-1 bg-black text-gold-500 text-xs font-bold rounded-full",content:"p-5",category:"text-xs text-stone-400 uppercase tracking-wider font-semibold mb-1",name:"font-bold text-black text-lg leading-tight mb-2 line-clamp-2 group-hover:text-gold-700 transition-colors",variants:"mb-3",colorDots:"flex items-center gap-1.5",colorDot:"w-4 h-4 rounded-full border-2 border-white shadow-sm ring-1 ring-stone-200",moreColors:"text-xs text-stone-400 font-medium ml-1",priceRow:"flex items-center justify-between",price:"text-xl font-bold text-gold-600"},Or={base:"px-4 py-2 rounded-lg font-bold transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2",variants:{primary:"bg-gold-500 text-black hover:bg-gold-400 focus:ring-gold-500 shadow-md hover:shadow-lg",secondary:"bg-stone-800 text-white hover:bg-black focus:ring-stone-600 shadow-sm",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border-2 border-gold-500 text-gold-700 hover:bg-gold-50 focus:ring-gold-500 bg-transparent",black:"bg-black text-gold-500 hover:bg-stone-900 focus:ring-black shadow-xl border-none"}},Ye=({children:t,variant:e="primary",isLoading:r=!1,className:s="",disabled:a,...i})=>n.jsx("button",{className:`${Or.base} ${Or.variants[e]} ${a||r?"opacity-50 cursor-not-allowed":""} ${s}`,disabled:a||r,...i,children:r?n.jsxs("svg",{className:"animate-spin h-5 w-5 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):t}),Sa=({isOpen:t,onClose:e,cart:r,onRemove:s})=>{const a=qr(),i=r.reduce((d,u)=>d+u.price*u.quantity,0),o=i/(1+wa),l=i-o,c=()=>{e(),a("/checkout")};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`${F.overlay} ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),n.jsxs("div",{className:`${F.sidebar.container} ${t?"translate-x-0":"translate-x-full"}`,children:[n.jsxs("div",{className:F.sidebar.header,children:[n.jsx("h2",{className:"text-xl font-bold text-black",children:"Tu Carrito"}),n.jsx("button",{onClick:e,className:F.sidebar.closeBtn,children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:F.sidebar.content,children:r.length===0?n.jsx("div",{className:F.emptyCart,children:n.jsx("p",{children:"Tu carrito est vaco"})}):r.map(d=>n.jsxs("div",{className:F.item.container,children:[n.jsx("img",{src:d.imageUrl,alt:d.name,className:F.item.image}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:F.item.name,children:d.name}),n.jsxs("div",{className:F.item.details,children:[n.jsxs("span",{className:"text-sm text-stone-700 font-medium",children:["Cant: ",d.quantity]}),n.jsx("span",{className:"font-bold text-gold-700",children:xe(d.price*d.quantity)})]}),n.jsx("button",{onClick:()=>s(d.id),className:F.item.removeBtn,children:"Eliminar"})]})]},d.id))}),r.length>0&&n.jsxs("div",{className:F.footer.container,children:[n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:F.footer.row,children:[n.jsx("span",{children:"Subtotal (Base)"}),n.jsx("span",{children:xe(o)})]}),n.jsxs("div",{className:F.footer.row,children:[n.jsx("span",{children:"IGV (18%)"}),n.jsx("span",{children:xe(l)})]}),n.jsxs("div",{className:F.footer.totalRow,children:[n.jsx("span",{children:"Total"}),n.jsx("span",{children:xe(i)})]})]}),n.jsx(Ye,{onClick:c,className:F.footer.button,children:"Ir a Pagar "}),n.jsx("p",{className:F.footer.disclaimer,children:"Transacciones seguras procesadas externamente."})]})]})]})},F={overlay:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",sidebar:{container:"fixed top-0 right-0 h-full w-[90%] sm:w-96 bg-bone shadow-2xl z-50 transform transition-transform duration-300 flex flex-col",header:"p-5 border-b border-gold-400 flex justify-between items-center bg-gold-500",closeBtn:"p-2 hover:bg-black/10 rounded-full text-black",content:"flex-1 overflow-y-auto p-5 space-y-4"},emptyCart:"text-center text-stone-500 mt-20 font-medium",item:{container:"flex gap-4 border-b border-stone-200 pb-4 last:border-0",image:"w-20 h-20 rounded-md object-cover bg-stone-100",name:"font-bold text-black line-clamp-1",details:"flex justify-between items-center mt-2",removeBtn:"text-xs text-red-600 mt-2 hover:text-red-800 hover:underline font-medium"},footer:{container:"p-6 border-t border-gold-200 bg-white",row:"flex justify-between text-sm text-stone-800 font-medium",totalRow:"flex justify-between text-lg font-bold text-black pt-2 border-t border-stone-200",button:"w-full py-3 text-lg bg-gold-500 hover:bg-gold-400 text-black",disclaimer:"text-center text-xs text-stone-500 mt-3 font-medium"}},is=({product:t,products:e=[],isOpen:r,onClose:s,onAddToCart:a,onSwitchProduct:i})=>{const[o,l]=j.useState(1),[c,d]=j.useState(""),[u,p]=j.useState(""),[m,h]=j.useState(0),g=j.useMemo(()=>ka(t||{},u),[t,u]);j.useEffect(()=>{if(t){d(t.sizes?.[0]||"");const b=t.colors?.[0]||"";p(b),l(1),h(0)}},[t]),j.useEffect(()=>{h(0)},[g]);const f=ne.useMemo(()=>!t||!e.length?[]:e.filter(b=>b.category===t.category&&b.id!==t.id).slice(0,4),[t,e]);if(!r||!t)return null;const v=()=>{a(t,o),s()},y=()=>l(b=>b+1),x=()=>l(b=>Math.max(1,b-1));return n.jsx("div",{className:C.overlay,onClick:s,children:n.jsxs("div",{className:C.modal,onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:s,className:C.closeButton,children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("div",{className:C.content,children:[n.jsxs("div",{className:C.imageSection,children:[n.jsx("img",{src:g[m]||t.imageUrl,alt:t.name,className:C.image}),(ja(t)||g.length>1)&&n.jsx("div",{className:C.thumbnails.container,children:g.map((b,w)=>n.jsx("button",{onClick:()=>h(w),className:`${C.thumbnails.item} ${w===m?C.thumbnails.active:""}`,children:n.jsx("img",{src:b,alt:`${t.name} ${w+1}`,className:"w-full h-full object-cover"})},w))}),n.jsx("div",{className:C.categoryBadge,children:t.category})]}),n.jsxs("div",{className:C.details,children:[n.jsx("h2",{className:C.title,children:t.name}),t.brand&&n.jsxs("p",{className:"text-sm text-stone-600 font-medium",children:["Marca: ",n.jsx("strong",{children:t.brand})]}),n.jsx("p",{className:C.price,children:xe(t.price)}),n.jsx("p",{className:C.description,children:t.description}),(t.sizes||t.colors)&&n.jsxs("div",{className:C.variants,children:[t.sizes&&t.sizes.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:C.variantLabel,children:"Talla:"}),n.jsx("div",{className:C.variantOptions,children:t.sizes.map(b=>n.jsx("button",{onClick:()=>d(b),className:`${C.variantButton} ${c===b?C.variantButtonActive:""}`,children:b},b))})]}),t.colors&&t.colors.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:C.variantLabel,children:"Color:"}),n.jsx("div",{className:C.variantOptions,children:t.colors.map(b=>n.jsx("button",{onClick:()=>p(b),className:`${C.variantButton} ${u===b?C.variantButtonActive:""}`,children:b},b))})]})]}),n.jsxs("div",{className:C.features,children:[n.jsx("h3",{className:C.featuresTitle,children:"Caractersticas"}),n.jsxs("ul",{className:C.featuresList,children:[n.jsx("li",{children:" Producto 100% peruano"}),n.jsx("li",{children:" Envo a todo el pas"}),n.jsx("li",{children:" Garanta de calidad"}),n.jsx("li",{children:" Atencin personalizada"})]})]}),n.jsxs("div",{className:C.actions,children:[n.jsxs("div",{className:C.quantitySelector,children:[n.jsx("button",{onClick:x,className:C.quantityButton,children:"-"}),n.jsx("span",{className:C.quantityDisplay,children:o}),n.jsx("button",{onClick:y,className:C.quantityButton,children:"+"})]}),n.jsx(Ye,{onClick:v,className:"flex-1",children:"Agregar al Carrito"})]})]})]}),f.length>0&&n.jsxs("div",{className:C.related.container,children:[n.jsx("h3",{className:C.related.title,children:"Tambin te podra interesar"}),n.jsx("div",{className:C.related.grid,children:f.map(b=>n.jsxs("div",{className:C.related.card,onClick:()=>i&&i(b),children:[n.jsx("div",{className:"h-32 w-full bg-stone-100 overflow-hidden rounded-lg mb-2",children:n.jsx("img",{src:b.imageUrl,alt:b.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"})}),n.jsx("div",{className:"text-sm font-bold text-[#0f1c29] truncate",children:b.name}),n.jsx("div",{className:"text-xs text-gold-600 font-bold",children:xe(b.price)})]},b.id))})]})]})})},C={overlay:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",modal:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-fade-in-up relative",closeButton:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-black rounded-full p-2 shadow-lg transition-all hover:scale-110",content:"grid md:grid-cols-2 gap-8 p-8",imageSection:"relative",image:"w-full h-96 object-cover rounded-xl shadow-md",thumbnails:{container:"flex gap-2 mt-4 overflow-x-auto pb-2",item:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 border-stone-200 cursor-pointer hover:border-gold-500 transition-colors",active:"!border-gold-600 ring-2 ring-gold-500"},categoryBadge:"absolute top-4 left-4 bg-black text-gold-500 px-4 py-2 rounded-lg text-sm font-bold shadow-lg",details:"flex flex-col gap-4",title:"text-3xl font-bold text-black",price:"text-2xl font-bold text-gold-700",description:"text-stone-700 leading-relaxed",variants:"space-y-4 border-y border-stone-200 py-4",variantLabel:"block text-sm font-bold text-stone-900 mb-2",variantOptions:"flex flex-wrap gap-2",variantButton:"px-4 py-2 border-2 border-stone-300 rounded-lg font-medium text-stone-800 hover:border-gold-500 transition-colors",variantButtonActive:"!border-gold-600 !bg-gold-50 !text-black font-bold",features:"bg-bone rounded-lg p-6",featuresTitle:"font-bold text-black mb-3",featuresList:"space-y-2 text-stone-800 text-sm",actions:"flex gap-4 items-center pt-6 border-t border-stone-200",quantitySelector:"flex items-center border-2 border-stone-300 rounded-lg overflow-hidden",quantityButton:"px-4 py-2 bg-stone-100 hover:bg-stone-200 text-black font-bold transition-colors",quantityDisplay:"px-6 py-2 font-bold text-black min-w-[3rem] text-center",related:{container:"p-8 border-t border-stone-100 bg-stone-50 rounded-b-2xl",title:"text-lg font-bold text-[#0f1c29] mb-4 font-serif",grid:"grid grid-cols-2 md:grid-cols-4 gap-4",card:"group cursor-pointer bg-white p-2 rounded-lg shadow-sm hover:shadow-md transition-shadow"}};function Ea(t,e){let r;try{r=t()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=r.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const zt=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(s){return zt(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return zt(s)(r)}}}},Ta=(t,e)=>(r,s,a)=>{let i={storage:Ea(()=>localStorage),partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...e},o=!1,l=0;const c=new Set,d=new Set;let u=i.storage;if(!u)return t((...v)=>{r(...v)},s,a);const p=()=>{const v=i.partialize({...s()});return u.setItem(i.name,{state:v,version:i.version})},m=a.setState;a.setState=(v,y)=>(m(v,y),p());const h=t((...v)=>(r(...v),p()),s,a);a.getInitialState=()=>h;let g;const f=()=>{var v,y;if(!u)return;const x=++l;o=!1,c.forEach(w=>{var A;return w((A=s())!=null?A:h)});const b=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(v=s())!=null?v:h))||void 0;return zt(u.getItem.bind(u))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const A=i.migrate(w.state,w.version);return A instanceof Promise?A.then(E=>[!0,E]):[!0,A]}}else return[!1,w.state];return[!1,void 0]}).then(w=>{var A;if(x!==l)return;const[E,O]=w;if(g=i.merge(O,(A=s())!=null?A:h),r(g,!0),E)return p()}).then(()=>{x===l&&(b?.(g,void 0),g=s(),o=!0,d.forEach(w=>w(g)))}).catch(w=>{x===l&&b?.(void 0,w)})};return a.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:v=>(c.add(v),()=>{c.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},i.skipHydration||f(),g||h},as=Ta,os=Mr()(as((t,e)=>({items:[],isOpen:!1,addItem:r=>{t(s=>s.items.find(i=>i.id===r.id)?{items:s.items.map(i=>i.id===r.id?{...i,quantity:i.quantity+1}:i),isOpen:!0}:{items:[...s.items,{...r,quantity:1}],isOpen:!0})},removeItem:r=>{t(s=>({items:s.items.filter(a=>a.id!==r)}))},updateQuantity:(r,s)=>{if(s<=0){e().removeItem(r);return}t(a=>({items:a.items.map(i=>i.id===r?{...i,quantity:s}:i)}))},clearCart:()=>{t({items:[]})},openCart:()=>t({isOpen:!0}),closeCart:()=>t({isOpen:!1}),toggleCart:()=>t(r=>({isOpen:!r.isOpen})),getTotalItems:()=>e().items.reduce((r,s)=>r+s.quantity,0),getTotalPrice:()=>e().items.reduce((r,s)=>r+s.price*s.quantity,0)}),{name:"allahu-cart-storage",partialize:t=>({items:t.items})})),Na=()=>{const[t,e]=j.useState(0),r=[{id:1,image:"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?q=80&w=1287&auto=format&fit=crop",title:"Coleccin Mujer",subtitle:"Elegancia y confort en cada prenda",link:"/shop?category=Mujer"},{id:2,image:"https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=2070&auto=format&fit=crop",title:"Nueva Temporada",subtitle:"Descubre lo ltimo en moda peruana",link:"/shop"},{id:3,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?q=80&w=1471&auto=format&fit=crop",title:"Abrigos de Alpaca",subtitle:"Calidez natural para este invierno",link:"/shop"}];j.useEffect(()=>{const i=setInterval(()=>{e(o=>(o+1)%r.length)},5e3);return()=>clearInterval(i)},[r.length]);const s=()=>e(i=>(i+1)%r.length),a=()=>e(i=>(i-1+r.length)%r.length);return n.jsxs("section",{className:"relative w-full h-[600px] overflow-hidden bg-[#0f1c29]",children:[r.map((i,o)=>n.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${o===t?"opacity-100 z-10":"opacity-0 z-0"}`,children:[n.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover opacity-60"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0f1c29] via-transparent to-transparent"}),n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center p-6",children:[n.jsx("span",{className:"text-gold-400 tracking-[0.3em] uppercase text-sm font-bold mb-4 animate-fade-in-up",children:i.subtitle}),n.jsx("h2",{className:"text-5xl md:text-7xl font-serif text-white mb-8 italic animate-fade-in-up stagger-1",children:i.title}),n.jsx(H,{to:i.link,className:"px-8 py-3 border border-white text-white hover:bg-white hover:text-[#0f1c29] transition-colors uppercase tracking-widest text-xs font-bold animate-fade-in-up stagger-2",children:"Ver Coleccin"})]})]},i.id)),n.jsx("button",{onClick:a,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 w-12 h-12 flex items-center justify-center rounded-full border border-white/20 text-white hover:bg-white hover:text-[#0f1c29] transition-all",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),n.jsx("button",{onClick:s,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 w-12 h-12 flex items-center justify-center rounded-full border border-white/20 text-white hover:bg-white hover:text-[#0f1c29] transition-all",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})}),n.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex gap-3",children:r.map((i,o)=>n.jsx("button",{onClick:()=>e(o),className:`w-2 h-2 rounded-full transition-all ${o===t?"bg-gold-500 w-8":"bg-white/50 hover:bg-white"}`},o))})]})},Ca=()=>{qr();const{addItem:t,openCart:e}=os(),[r,s]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState(null),[c,d]=j.useState(0),u=(h,g=1)=>{for(let f=0;f<g;f++)t(h);e()},p=()=>{c<r.length-4&&d(h=>h+1)},m=()=>{c>0&&d(h=>h-1)};return j.useEffect(()=>{(async()=>{try{const g=await ya();s(g)}catch{}finally{i(!1)}})()},[]),n.jsxs("div",{className:X.wrapper,children:[n.jsxs("section",{className:X.hero.section,children:[n.jsx("div",{className:X.hero.overlay}),n.jsxs("div",{className:X.hero.content,children:[n.jsx("span",{className:X.hero.badge,children:"Nueva Coleccin 2026"}),n.jsxs("h1",{className:X.hero.title,children:[n.jsx("span",{className:"block font-serif italic text-gold-400",children:"Elegancia"}),n.jsx("span",{className:"block text-white tracking-widest uppercase text-6xl md:text-8xl mt-2 mb-4",children:"Peruana"}),n.jsx("span",{className:"block text-xl md:text-2xl font-light text-bone/90 tracking-widest font-sans",children:"PARA EL MUNDO"})]}),n.jsx("p",{className:X.hero.description,children:"Exquisita manufactura en algodn pima y denim. La fusin perfecta entre la tradicin textil peruana y el diseo contemporneo."}),n.jsx("div",{className:X.hero.actions,children:n.jsx(H,{to:"/shop",children:n.jsx("button",{className:X.hero.primaryBtn,children:"Explorar Coleccin"})})})]}),n.jsx("div",{className:"absolute bottom-4 left-0 w-full h-px bg-gold-500/50"}),n.jsx("div",{className:"absolute bottom-6 left-0 w-full h-px bg-gold-500/50"})]}),n.jsx(Na,{}),n.jsx("section",{className:X.products.section,children:n.jsxs("div",{className:X.products.container,children:[n.jsxs("div",{className:"text-center mb-16 relative",children:[n.jsx("span",{className:"text-gold-600 font-bold uppercase tracking-[0.2em] text-sm md:text-base",children:"Lo mejor de la temporada"}),n.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-[#0f1c29] mt-3",children:"Productos Destacados"}),n.jsx("div",{className:"w-24 h-1 bg-gold-400 mx-auto mt-6"})]}),n.jsx("div",{className:"relative",children:a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-gold-500 border-t-transparent rounded-full mx-auto mb-4"}),n.jsx("p",{className:"text-stone-600",children:"Cargando productos destacados..."})]}):r.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-stone-600",children:"No hay productos destacados disponibles"}),n.jsx(H,{to:"/shop",className:"text-gold-600 hover:underline mt-2 inline-block",children:"Ver tienda"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"overflow-hidden",children:n.jsx("div",{className:"flex transition-transform duration-500 ease-out gap-8",style:{transform:`translateX(-${c*(100/4)}%)`},children:r.map(h=>n.jsx("div",{className:"flex-shrink-0",style:{width:"calc(25% - 24px)"},children:n.jsx(Mt,{product:h,onAddToCart:g=>u(g,1),onViewProduct:l})},h.id))})}),r.length>4&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:m,disabled:c===0,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-[#0f1c29] hover:bg-gold-400 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed z-10",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),n.jsx("button",{onClick:p,disabled:c>=r.length-4,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-[#0f1c29] hover:bg-gold-400 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed z-10",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})})]})}),n.jsxs("section",{className:"py-24 relative bg-[#2a4f6e] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/denim.png")'}}),n.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center px-6",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-serif text-white mb-6",children:"nete al Club VIP"}),n.jsx("p",{className:"text-stone-200 text-lg mb-10 font-light max-w-2xl mx-auto",children:"Recibe noticias sobre nuestras colecciones de edicin limitada y descuentos exclusivos directamente en tu correo."}),n.jsxs("form",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-lg mx-auto",onSubmit:h=>h.preventDefault(),children:[n.jsx("input",{type:"email",placeholder:"Tu correo electrnico",className:"flex-1 px-6 py-4 bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:border-gold-400 focus:bg-white/20 transition-all backdrop-blur-sm"}),n.jsx("button",{type:"submit",className:"px-8 py-4 bg-gold-500 text-white font-bold uppercase tracking-widest hover:bg-gold-600 transition-colors shadow-lg hover:shadow-gold/50",children:"Suscribirse"})]})]})]}),n.jsx(is,{product:o,products:r,isOpen:o!==null,onClose:()=>l(null),onAddToCart:u,onSwitchProduct:l})]})},X={wrapper:"flex flex-col w-full overflow-x-hidden bg-white",hero:{section:"relative min-h-screen flex items-center justify-center overflow-hidden bg-[#1e3850]",overlay:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1582533036425-4c6e94e9f545?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center opacity-40 mix-blend-overlay",content:"relative z-10 max-w-5xl mx-auto px-6 text-center flex flex-col items-center",badge:"inline-block py-1 px-4 border border-gold-400 text-gold-400 text-xs font-bold uppercase tracking-[0.3em] mb-6",title:"mb-8",description:"text-lg text-bone/80 max-w-2xl mx-auto mb-12 font-light leading-relaxed",actions:"flex flex-col sm:flex-row gap-4 justify-center",primaryBtn:"px-10 py-4 bg-gold-500 text-white font-bold uppercase tracking-widest text-sm hover:bg-gold-600 transition-all shadow-lg hover:shadow-gold/30 hover:-translate-y-1"},products:{section:"py-32 bg-white",container:"max-w-7xl mx-auto px-6"}},_t=async t=>{if(!U)return{};try{const{data:e,error:r}=await U.from("user_profiles").select("first_name, last_name, phone, role").eq("id",t).maybeSingle();return r?{}:e?{firstName:e.first_name||"",lastName:e.last_name||"",phone:e.phone||"",role:e.role||"customer"}:{}}catch{return{}}},Aa=async(t,e,r,s)=>{if(U)try{const{data:a,error:i}=await U.from("user_profiles").select("id").eq("id",t).maybeSingle();if(!a){const o={id:t,first_name:r||"",last_name:s||"",role:"customer"},{error:l}=await U.from("user_profiles").insert(o);if(l)throw new Error(`Failed to create profile: ${l.message}`)}}catch(a){throw a}},Ft=Mr()(as((t,e)=>({user:null,session:null,isLoading:!1,isInitialized:!1,error:null,initialize:async()=>{if(!ye()||!U){t({isInitialized:!0,isLoading:!1});return}t({isLoading:!0});try{const{data:{session:r},error:s}=await U.auth.getSession();if(s)throw s;if(r?.user){const a=await _t(r.user.id);t({session:r,user:{id:r.user.id,email:r.user.email||"",...a},isLoading:!1,isInitialized:!0})}else t({session:null,user:null,isLoading:!1,isInitialized:!0});U.auth.onAuthStateChange(async(a,i)=>{if(a==="SIGNED_IN"&&i?.user){const o=await _t(i.user.id);t({session:i,user:{id:i.user.id,email:i.user.email||"",...o}})}else a==="SIGNED_OUT"&&t({session:null,user:null})})}catch{t({isLoading:!1,isInitialized:!0,error:"Error de autenticacin"})}},signIn:async(r,s)=>{if(!ye()||!U)return{success:!1,error:"Supabase no configurado"};t({isLoading:!0,error:null});try{const{data:a,error:i}=await U.auth.signInWithPassword({email:r,password:s});if(i)return t({isLoading:!1,error:i.message}),{success:!1,error:i.message};if(a.user){const o=await _t(a.user.id);return t({session:a.session,user:{id:a.user.id,email:a.user.email||"",...o},isLoading:!1}),{success:!0}}return{success:!1,error:"Error desconocido"}}catch(a){const i=a instanceof Error?a.message:"Error al iniciar sesin";return t({isLoading:!1,error:i}),{success:!1,error:i}}},signUp:async(r,s,a,i)=>{if(!ye()||!U)return{success:!1,error:"Supabase no configurado"};t({isLoading:!0,error:null});try{const{data:o,error:l}=await U.auth.signUp({email:r,password:s});return l?(t({isLoading:!1,error:l.message}),{success:!1,error:l.message}):o.user?(await Aa(o.user.id,r,a,i),t({session:o.session,user:{id:o.user.id,email:o.user.email||"",firstName:a||"",lastName:i||"",phone:"",role:"customer"},isLoading:!1}),{success:!0}):{success:!1,error:"Error desconocido"}}catch(o){const l=o instanceof Error?o.message:"Error al registrar";return t({isLoading:!1,error:l}),{success:!1,error:l}}},signOut:async()=>{if(!ye()||!U){t({user:null,session:null});return}t({isLoading:!0});try{await U.auth.signOut(),t({user:null,session:null,isLoading:!1})}catch{t({user:null,session:null,isLoading:!1})}},clearError:()=>t({error:null}),isAuthenticated:()=>e().user!==null,isAdmin:()=>e().user?.role==="admin"}),{name:"allahu-auth-storage",partialize:t=>({user:t.user})})),ls=j.createContext(void 0),cs=()=>{const t=j.useContext(ls);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},Oa=({children:t})=>{const[e,r]=j.useState([]),s=j.useCallback((i,o,l=4e3)=>{const c=Date.now().toString();r(d=>[...d,{id:c,type:i,message:o,duration:l}]),l>0&&setTimeout(()=>{a(c)},l)},[]),a=j.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return n.jsxs(ls.Provider,{value:{toasts:e,showToast:s,hideToast:a},children:[t,n.jsx(Ra,{toasts:e,onClose:a})]})},Ra=({toasts:t,onClose:e})=>t.length===0?null:n.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-3 max-w-sm",children:t.map(r=>n.jsx(Pa,{toast:r,onClose:()=>e(r.id)},r.id))}),Pa=({toast:t,onClose:e})=>{const r={success:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),error:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),warning:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),info:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},s={success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-black",info:"bg-blue-500 text-white"};return n.jsxs("div",{className:`${s[t.type]} px-4 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-slide-in-right`,children:[n.jsx("div",{className:"flex-shrink-0",children:r[t.type]}),n.jsx("p",{className:"flex-1 font-medium text-sm",children:t.message}),n.jsx("button",{onClick:e,className:"flex-shrink-0 opacity-70 hover:opacity-100 transition-opacity",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},Ia=({isOpen:t,onClose:e})=>t?n.jsx("div",{className:T.overlay,onClick:e,children:n.jsxs("div",{className:T.modal,onClick:r=>r.stopPropagation(),children:[n.jsxs("div",{className:T.header,children:[n.jsx("h2",{className:T.title,children:" Aviso de Privacidad"}),n.jsx("button",{onClick:e,className:T.closeButton,children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:T.content,children:[n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Responsable del Tratamiento"}),n.jsxs("p",{className:T.text,children:[n.jsx("strong",{children:"ALLAHU AKBAR SHOP PER"}),n.jsx("br",{}),"Contacto: ",n.jsx("a",{href:"mailto:alahuakbarperu@gmail.com",className:T.link,children:"alahuakbarperu@gmail.com"})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Datos que Recopilamos"}),n.jsxs("ul",{className:T.list,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Nombres y Apellidos:"})," Para personalizar tu experiencia y comunicaciones"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Correo Electrnico:"})," Para autenticacin, notificaciones de pedidos y comunicaciones"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Telfono:"})," Para coordinar entregas (opcional durante la compra)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Direccin de Envo:"})," Para procesar y entregar tus pedidos"]})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Finalidad del Tratamiento"}),n.jsxs("ul",{className:T.list,children:[n.jsx("li",{children:"Crear y gestionar tu cuenta de usuario"}),n.jsx("li",{children:"Procesar, confirmar y entregar tus pedidos"}),n.jsx("li",{children:"Enviarte notificaciones sobre el estado de tus pedidos"}),n.jsx("li",{children:"Mejorar tu experiencia como usuario"}),n.jsx("li",{children:"Cumplir con nuestras obligaciones legales y tributarias"})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Base Legal"}),n.jsx("p",{className:T.text,children:"El tratamiento de tus datos se basa en:"}),n.jsxs("ul",{className:T.list,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Tu consentimiento expreso"})," (Art. 5 de la Ley N 29733 - LPDP)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ejecucin del contrato"})," de compra-venta entre t y nosotros"]})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Tus Derechos (ARCO)"}),n.jsx("p",{className:T.text,children:"Como titular de tus datos personales, tienes derecho a:"}),n.jsxs("ul",{className:T.list,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Acceso:"})," Conocer qu datos tenemos sobre ti"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Rectificacin:"})," Corregir datos incorrectos o desactualizados"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cancelacin:"})," Solicitar la eliminacin de tus datos (salvo obligaciones legales)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Oposicin:"})," Oponerte a ciertos tratamientos de tus datos"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Portabilidad:"})," Obtener una copia de tus datos en formato estructurado"]})]}),n.jsxs("p",{className:T.text,children:["Para ejercer estos derechos, contctanos en: ",n.jsx("a",{href:"mailto:alahuakbarperu@gmail.com",className:T.link,children:"alahuakbarperu@gmail.com"})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Seguridad de tus Datos"}),n.jsx("p",{className:T.text,children:"Protegemos tus datos mediante:"}),n.jsxs("ul",{className:T.list,children:[n.jsxs("li",{children:["Almacenamiento en Supabase con ",n.jsx("strong",{children:"encriptacin en trnsito y en reposo"})]}),n.jsx("li",{children:"Acceso restringido solo a personal autorizado"}),n.jsx("li",{children:"Medidas tcnicas y organizativas de seguridad"}),n.jsxs("li",{children:[n.jsx("strong",{children:"No compartimos"})," tus datos con terceros sin tu consentimiento expreso"]})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Periodo de Conservacin"}),n.jsxs("ul",{className:T.list,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Datos de cuenta:"})," Mientras tu cuenta est activa"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Datos de pedidos:"})," 5 aos (por obligaciones contables y tributarias)"]})]})]}),n.jsxs("section",{className:T.section,children:[n.jsx("h3",{className:T.sectionTitle,children:"Actualizacin del Aviso"}),n.jsx("p",{className:T.text,children:"Nos reservamos el derecho de actualizar este aviso. Te notificaremos de cambios significativos por correo electrnico."})]}),n.jsxs("div",{className:T.footer,children:[n.jsxs("p",{className:T.footerText,children:[n.jsx("strong",{children:"ltima actualizacin:"})," Enero 2026"]}),n.jsx(Ye,{onClick:e,className:"w-full",children:"He Ledo y Entendido"})]})]})]})}):null,T={overlay:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 overflow-y-auto",modal:"bg-white rounded-xl shadow-2xl max-w-2xl w-full my-8 animate-fade-in-up",header:"flex items-center justify-between p-6 border-b border-stone-200 sticky top-0 bg-white rounded-t-xl z-10",title:"text-2xl font-bold text-black",closeButton:"text-stone-400 hover:text-black transition-colors p-1",content:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",section:"space-y-3",sectionTitle:"text-lg font-bold text-black flex items-center gap-2",text:"text-stone-700 leading-relaxed",list:"list-disc list-inside space-y-2 text-stone-700 pl-2",link:"text-gold-600 hover:text-gold-700 underline font-medium",footer:"border-t border-stone-200 pt-4 space-y-4",footerText:"text-sm text-stone-600 text-center"},$a=({isOpen:t,onClose:e,onLogin:r,onForgotPassword:s})=>{const a=Ft(R=>R.signUp),{showToast:i}=cs(),[o,l]=j.useState("login"),[c,d]=j.useState(""),[u,p]=j.useState(""),[m,h]=j.useState(""),[g,f]=j.useState(""),[v,y]=j.useState(""),[x,b]=j.useState(!1),[w,A]=j.useState(!1),[E,O]=j.useState(!1);if(!t)return null;const J=async R=>{if(R.preventDefault(),o==="register"){if(u!==m){i("error","Las contraseas no coinciden");return}if(u.length<8){i("error","La contrasea debe tener al menos 8 caracteres");return}if(!g||!v){i("error","Por favor ingresa tu nombre completo");return}if(!w){i("error","Debes aceptar el Aviso de Privacidad para continuar");return}b(!0);const se=await a(c,u,g,v);b(!1),se.success?(i("success","Registro exitoso! Bienvenido"),e(),d(""),p(""),h(""),f(""),y(""),A(!1)):i("error",se.error||"Error al registrar");return}r(c,u)};return n.jsxs("div",{className:D.overlay,onClick:e,children:[n.jsxs("div",{className:D.modal,onClick:R=>R.stopPropagation(),children:[n.jsxs("div",{className:D.header,children:[n.jsx("h2",{className:D.title,children:o==="login"?"Iniciar Sesin":"Crear Cuenta"}),n.jsx("button",{onClick:e,className:D.closeButton,children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:J,className:D.form,children:[o==="register"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:D.label,children:"Nombres *"}),n.jsx("input",{type:"text",required:!0,value:g,onChange:R=>f(R.target.value),className:D.input,placeholder:"Ej: Juan"})]}),n.jsxs("div",{children:[n.jsx("label",{className:D.label,children:"Apellidos *"}),n.jsx("input",{type:"text",required:!0,value:v,onChange:R=>y(R.target.value),className:D.input,placeholder:"Ej: Prez"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:D.label,children:"Correo Electrnico"}),n.jsx("input",{type:"email",required:!0,value:c,onChange:R=>d(R.target.value),className:D.input,placeholder:"tu@email.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:D.label,children:"Contrasea"}),n.jsx("input",{type:"password",required:!0,minLength:8,value:u,onChange:R=>p(R.target.value),className:D.input,placeholder:"Mnimo 8 caracteres"})]}),o==="register"&&n.jsxs("div",{children:[n.jsx("label",{className:D.label,children:"Confirmar Contrasea"}),n.jsx("input",{type:"password",required:!0,minLength:8,value:m,onChange:R=>h(R.target.value),className:D.input,placeholder:"Repite tu contrasea"})]}),o==="register"&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-stone-50 rounded-lg border border-stone-200",children:[n.jsx("input",{type:"checkbox",id:"privacy-consent",checked:w,onChange:R=>A(R.target.checked),className:"mt-0.5 w-4 h-4 text-gold-600 border-stone-300 rounded focus:ring-gold-500",required:!0}),n.jsxs("label",{htmlFor:"privacy-consent",className:D.label+" mb-0",children:["He ledo y acepto el"," ",n.jsx("button",{type:"button",onClick:()=>O(!0),className:"text-gold-600 hover:text-gold-700 underline font-bold transition-colors",children:"Aviso de Privacidad"})," ","y autorizo el tratamiento de mis datos personales *"]})]}),n.jsx(Ye,{type:"submit",className:"w-full",disabled:x,children:x?"Procesando...":o==="login"?"Iniciar Sesin":"Registrarse"}),o==="login"&&n.jsx("div",{className:"text-center",children:n.jsx("button",{type:"button",onClick:()=>{e(),s()},className:D.forgotPasswordButton,children:"Olvidaste tu contrasea?"})}),n.jsx("div",{className:D.footer,children:n.jsx("button",{type:"button",onClick:()=>{l(o==="login"?"register":"login"),p(""),h(""),f(""),y(""),A(!1)},className:D.switchButton,children:o==="login"?"No tienes cuenta? Regstrate":"Ya tienes cuenta? Inicia sesin"})})]})]}),n.jsx(Ia,{isOpen:E,onClose:()=>O(!1)})]})},D={overlay:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",modal:"bg-white rounded-xl shadow-2xl max-w-md w-full animate-fade-in-up",header:"flex items-center justify-between p-6 border-b border-stone-200",title:"text-2xl font-bold text-black",closeButton:"text-stone-400 hover:text-black transition-colors p-1",form:"p-6 space-y-4",label:"block text-sm font-bold text-stone-900 mb-1",input:"w-full px-4 py-2 border border-stone-300 rounded-lg bg-white text-black font-medium focus:ring-2 focus:ring-gold-500 outline-none",forgotPasswordButton:"text-sm text-stone-600 hover:text-gold-700 font-medium transition-colors underline",footer:"text-center pt-4 border-t border-stone-200",switchButton:"text-sm text-gold-700 hover:text-gold-900 font-bold transition-colors"},La=({filters:t,onFilterChange:e,categories:r,maxPrice:s,availableSizes:a,availableColors:i})=>{const[o,l]=j.useState(!0),c=f=>{e({...t,searchQuery:f.target.value})},d=f=>{const v=t.selectedCategories.includes(f)?t.selectedCategories.filter(y=>y!==f):[...t.selectedCategories,f];e({...t,selectedCategories:v})},u=f=>{const v=t.selectedSizes.includes(f)?t.selectedSizes.filter(y=>y!==f):[...t.selectedSizes,f];e({...t,selectedSizes:v})},p=f=>{const v=t.selectedColors.includes(f)?t.selectedColors.filter(y=>y!==f):[...t.selectedColors,f];e({...t,selectedColors:v})},m=(f,v)=>{const y=[t.priceRange[0],t.priceRange[1]];y[f]=v,e({...t,priceRange:y})},h=()=>{e({searchQuery:"",selectedCategories:[],priceRange:[0,s],selectedSizes:[],selectedColors:[]})},g=t.searchQuery||t.selectedCategories.length>0||t.priceRange[0]>0||t.priceRange[1]<s||t.selectedSizes.length>0||t.selectedColors.length>0;return n.jsxs("div",{className:P.container,children:[n.jsxs("div",{className:P.header,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5 text-gold-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),n.jsx("h3",{className:P.title,children:"Filtros"})]}),n.jsx("button",{onClick:()=>l(!o),className:P.toggleButton,children:n.jsx("svg",{className:`w-5 h-5 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),o&&n.jsxs("div",{className:P.content,children:[n.jsxs("div",{className:P.section,children:[n.jsx("label",{className:P.label,children:"Buscar"}),n.jsx("input",{type:"text",value:t.searchQuery,onChange:c,placeholder:"Nombre del producto...",className:P.searchInput})]}),n.jsxs("div",{className:P.section,children:[n.jsx("label",{className:P.label,children:"Categoras"}),n.jsx("div",{className:P.checkboxGroup,children:r.map(f=>n.jsxs("label",{className:P.checkbox,children:[n.jsx("input",{type:"checkbox",checked:t.selectedCategories.includes(f),onChange:()=>d(f),className:P.checkboxInput}),n.jsx("span",{className:P.checkboxLabel,children:f})]},f))})]}),a.length>0&&n.jsxs("div",{className:P.section,children:[n.jsx("label",{className:P.label,children:"Talla"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(f=>n.jsx("button",{onClick:()=>u(f),className:`${P.variantButton} ${t.selectedSizes.includes(f)?P.variantButtonActive:""}`,children:f},f))})]}),i.length>0&&n.jsxs("div",{className:P.section,children:[n.jsx("label",{className:P.label,children:"Color"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(f=>n.jsx("button",{onClick:()=>p(f),className:`${P.variantButton} ${t.selectedColors.includes(f)?P.variantButtonActive:""}`,children:f},f))})]}),n.jsxs("div",{className:P.section,children:[n.jsxs("label",{className:P.label,children:["Rango de Precio: S/ ",t.priceRange[0]," - S/ ",t.priceRange[1]]}),n.jsxs("div",{className:P.priceInputs,children:[n.jsx("input",{type:"number",value:t.priceRange[0],onChange:f=>m(0,Number(f.target.value)),min:0,max:t.priceRange[1],className:P.priceInput}),n.jsx("span",{className:"text-stone-500",children:"-"}),n.jsx("input",{type:"number",value:t.priceRange[1],onChange:f=>m(1,Number(f.target.value)),min:t.priceRange[0],max:s,className:P.priceInput})]})]}),g&&n.jsx("button",{onClick:h,className:P.clearButton,children:"Limpiar Filtros"})]})]})},P={container:"bg-white rounded-xl shadow-sm border border-stone-200 p-4 md:p-6 sticky top-4",header:"flex items-center justify-between mb-4 md:mb-6",title:"text-lg md:text-xl font-bold text-black",toggleButton:"lg:hidden text-stone-600 hover:text-black transition-colors p-1",content:"space-y-4 md:space-y-6",section:"space-y-2",label:"block text-sm font-bold text-stone-900",searchInput:"w-full px-3 py-2 text-sm border border-stone-300 rounded-lg bg-white text-black font-medium focus:ring-2 focus:ring-gold-500 outline-none",checkboxGroup:"space-y-2",checkbox:"flex items-center gap-2 cursor-pointer hover:bg-stone-50 p-2 rounded transition-colors",checkboxInput:"w-4 h-4 accent-gold-500 cursor-pointer",checkboxLabel:"text-sm text-stone-800 font-medium",variantButton:"px-3 py-1.5 border-2 border-stone-300 rounded-lg font-medium text-sm text-stone-800 hover:border-gold-500 transition-colors",variantButtonActive:"!border-gold-600 !bg-gold-50 !text-black font-bold",priceInputs:"flex items-center gap-2",priceInput:"flex-1 px-2 py-1.5 text-sm border border-stone-300 rounded-lg text-black font-medium focus:ring-2 focus:ring-gold-500 outline-none",clearButton:"w-full bg-stone-100 hover:bg-stone-200 text-black font-bold py-2 px-4 rounded-lg transition-colors text-sm"},Ua=()=>n.jsx("div",{className:le.container,children:n.jsxs("div",{className:le.content,children:[n.jsxs("div",{className:le.errorCode,children:[n.jsx("span",{className:"animate-float inline-block",children:"4"}),n.jsx("span",{className:"animate-float inline-block",style:{animationDelay:"0.2s"},children:"0"}),n.jsx("span",{className:"animate-float inline-block",style:{animationDelay:"0.4s"},children:"4"})]}),n.jsx("h1",{className:le.title,children:"Oops! Pgina no encontrada"}),n.jsx("p",{className:le.description,children:"Parece que esta pgina se perdi en el camino. No te preocupes, puedes volver al inicio o explorar nuestra tienda."}),n.jsxs("div",{className:le.actions,children:[n.jsx(H,{to:"/",children:n.jsx(Ye,{className:"px-8 py-3",children:"Volver al Inicio"})}),n.jsx(H,{to:"/shop",children:n.jsx("button",{className:le.secondaryButton,children:"Explorar Tienda "})})]}),n.jsxs("div",{className:le.decoration,children:[n.jsx("span",{className:"text-6xl animate-bounce",style:{animationDelay:"0s"},children:""}),n.jsx("span",{className:"text-4xl animate-bounce",style:{animationDelay:"0.3s"},children:""}),n.jsx("span",{className:"text-5xl animate-bounce",style:{animationDelay:"0.6s"},children:""})]})]})}),le={container:"min-h-[70vh] flex items-center justify-center px-4 bg-gradient-to-b from-bone to-white",content:"max-w-lg text-center",errorCode:"text-9xl font-black text-gradient mb-8 tracking-tight",title:"text-3xl font-bold text-black mb-4",description:"text-stone-600 mb-8 leading-relaxed",actions:"flex flex-col sm:flex-row gap-4 justify-center mb-12",secondaryButton:"px-8 py-3 bg-stone-100 text-black font-bold rounded-lg hover:bg-stone-200 transition-colors",decoration:"flex justify-center gap-6 opacity-50"},Da=({size:t="md",text:e="Cargando..."})=>{const r={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"};return n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-4",children:[n.jsx("div",{className:`${r[t]} border-gold-200 border-t-gold-500 rounded-full animate-spin`,role:"status","aria-label":e}),e&&n.jsx("p",{className:"text-stone-500 text-sm font-medium animate-pulse",children:e})]})},ds=({text:t})=>n.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:n.jsx(Da,{size:"lg",text:t})});var jt,Rr;function Ba(){if(Rr)return jt;Rr=1;var t=typeof Element<"u",e=typeof Map=="function",r=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(i,o){if(i===o)return!0;if(i&&o&&typeof i=="object"&&typeof o=="object"){if(i.constructor!==o.constructor)return!1;var l,c,d;if(Array.isArray(i)){if(l=i.length,l!=o.length)return!1;for(c=l;c--!==0;)if(!a(i[c],o[c]))return!1;return!0}var u;if(e&&i instanceof Map&&o instanceof Map){if(i.size!==o.size)return!1;for(u=i.entries();!(c=u.next()).done;)if(!o.has(c.value[0]))return!1;for(u=i.entries();!(c=u.next()).done;)if(!a(c.value[1],o.get(c.value[0])))return!1;return!0}if(r&&i instanceof Set&&o instanceof Set){if(i.size!==o.size)return!1;for(u=i.entries();!(c=u.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(o)){if(l=i.length,l!=o.length)return!1;for(c=l;c--!==0;)if(i[c]!==o[c])return!1;return!0}if(i.constructor===RegExp)return i.source===o.source&&i.flags===o.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof o.valueOf=="function")return i.valueOf()===o.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof o.toString=="function")return i.toString()===o.toString();if(d=Object.keys(i),l=d.length,l!==Object.keys(o).length)return!1;for(c=l;c--!==0;)if(!Object.prototype.hasOwnProperty.call(o,d[c]))return!1;if(t&&i instanceof Element)return!1;for(c=l;c--!==0;)if(!((d[c]==="_owner"||d[c]==="__v"||d[c]==="__o")&&i.$$typeof)&&!a(i[d[c]],o[d[c]]))return!1;return!0}return i!==i&&o!==o}return jt=function(o,l){try{return a(o,l)}catch(c){if((c.message||"").match(/stack|recursion/i))return!1;throw c}},jt}var qa=Ba();const Ma=lt(qa);var kt,Pr;function za(){if(Pr)return kt;Pr=1;var t=function(e,r,s,a,i,o,l,c){if(!e){var d;if(r===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[s,a,i,o,l,c],p=0;d=new Error(r.replace(/%s/g,function(){return u[p++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};return kt=t,kt}var Fa=za();const Ir=lt(Fa);var St,$r;function Wa(){return $r||($r=1,St=function(e,r,s,a){var i=s?s.call(a,e,r):void 0;if(i!==void 0)return!!i;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var o=Object.keys(e),l=Object.keys(r);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),d=0;d<o.length;d++){var u=o[d];if(!c(u))return!1;var p=e[u],m=r[u];if(i=s?s.call(a,p,m,u):void 0,i===!1||i===void 0&&p!==m)return!1}return!0}),St}var Ha=Wa();const Va=lt(Ha);var us=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(us||{}),Et={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Lr=Object.values(us),er={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ka=Object.entries(er).reduce((t,[e,r])=>(t[r]=e,t),{}),re="data-rh",Ie={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},$e=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const s=t[r];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},Ga=t=>{let e=$e(t,"title");const r=$e(t,Ie.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const s=$e(t,Ie.DEFAULT_TITLE);return e||s||void 0},Ja=t=>$e(t,Ie.ON_CHANGE_CLIENT_STATE)||(()=>{}),Tt=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,s)=>({...r,...s}),{}),Ya=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,s)=>{if(!r.length){const a=Object.keys(s);for(let i=0;i<a.length;i+=1){const l=a[i].toLowerCase();if(t.indexOf(l)!==-1&&s[l])return r.concat(s)}}return r},[]),Qa=t=>console&&typeof console.warn=="function"&&void 0,Ue=(t,e,r)=>{const s={};return r.filter(a=>Array.isArray(a[t])?!0:(typeof a[t]<"u"&&Qa(`Helmet: ${t} should be of type "Array". Instead found type "${typeof a[t]}"`),!1)).map(a=>a[t]).reverse().reduce((a,i)=>{const o={};i.filter(c=>{let d;const u=Object.keys(c);for(let m=0;m<u.length;m+=1){const h=u[m],g=h.toLowerCase();e.indexOf(g)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(g==="rel"&&c[g].toLowerCase()==="stylesheet")&&(d=g),e.indexOf(h)!==-1&&(h==="innerHTML"||h==="cssText"||h==="itemprop")&&(d=h)}if(!d||!c[d])return!1;const p=c[d].toLowerCase();return s[d]||(s[d]={}),o[d]||(o[d]={}),s[d][p]?!1:(o[d][p]=!0,!0)}).reverse().forEach(c=>a.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const d=l[c],u={...s[d],...o[d]};s[d]=u}return a},[]).reverse()},Xa=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},Za=t=>({baseTag:Ya(["href"],t),bodyAttributes:Tt("bodyAttributes",t),defer:$e(t,Ie.DEFER),encode:$e(t,Ie.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Tt("htmlAttributes",t),linkTags:Ue("link",["rel","href"],t),metaTags:Ue("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Ue("noscript",["innerHTML"],t),onChangeClientState:Ja(t),scriptTags:Ue("script",["src","innerHTML"],t),styleTags:Ue("style",["cssText"],t),title:Ga(t),titleAttributes:Tt("titleAttributes",t),prioritizeSeoTags:Xa(t,Ie.PRIORITIZE_SEO_TAGS)}),hs=t=>Array.isArray(t)?t.join(""):t,eo=(t,e)=>{const r=Object.keys(t);for(let s=0;s<r.length;s+=1)if(e[r[s]]&&e[r[s]].includes(t[r[s]]))return!0;return!1},Nt=(t,e)=>Array.isArray(t)?t.reduce((r,s)=>(eo(s,e)?r.priority.push(s):r.default.push(s),r),{priority:[],default:[]}):{default:t,priority:[]},Ur=(t,e)=>({...t,[e]:void 0}),to=["noscript","script","style"],Wt=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),fs=t=>Object.keys(t).reduce((e,r)=>{const s=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${s}`:s},""),ro=(t,e,r,s)=>{const a=fs(r),i=hs(e);return a?`<${t} ${re}="true" ${a}>${Wt(i,s)}</${t}>`:`<${t} ${re}="true">${Wt(i,s)}</${t}>`},so=(t,e,r=!0)=>e.reduce((s,a)=>{const i=a,o=Object.keys(i).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,u)=>{const p=typeof i[u]>"u"?u:`${u}="${Wt(i[u],r)}"`;return d?`${d} ${p}`:p},""),l=i.innerHTML||i.cssText||"",c=to.indexOf(t)===-1;return`${s}<${t} ${re}="true" ${o}${c?"/>":`>${l}</${t}>`}`},""),ps=(t,e={})=>Object.keys(t).reduce((r,s)=>{const a=er[s];return r[a||s]=t[s],r},e),no=(t,e,r)=>{const s={key:e,[re]:!0},a=ps(r,s);return[ne.createElement("title",a,e)]},nt=(t,e)=>e.map((r,s)=>{const a={key:s,[re]:!0};return Object.keys(r).forEach(i=>{const l=er[i]||i;if(l==="innerHTML"||l==="cssText"){const c=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:c}}else a[l]=r[i]}),ne.createElement(t,a)}),Q=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>no(t,e.title,e.titleAttributes),toString:()=>ro(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ps(e),toString:()=>fs(e)};default:return{toComponent:()=>nt(t,e),toString:()=>so(t,e,r)}}},io=({metaTags:t,linkTags:e,scriptTags:r,encode:s})=>{const a=Nt(t,Et.meta),i=Nt(e,Et.link),o=Nt(r,Et.script);return{priorityMethods:{toComponent:()=>[...nt("meta",a.priority),...nt("link",i.priority),...nt("script",o.priority)],toString:()=>`${Q("meta",a.priority,s)} ${Q("link",i.priority,s)} ${Q("script",o.priority,s)}`},metaTags:a.default,linkTags:i.default,scriptTags:o.default}},ao=t=>{const{baseTag:e,bodyAttributes:r,encode:s=!0,htmlAttributes:a,noscriptTags:i,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:d}=t;let{linkTags:u,metaTags:p,scriptTags:m}=t,h={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:h,linkTags:u,metaTags:p,scriptTags:m}=io(t)),{priority:h,base:Q("base",e,s),bodyAttributes:Q("bodyAttributes",r,s),htmlAttributes:Q("htmlAttributes",a,s),link:Q("link",u,s),meta:Q("meta",p,s),noscript:Q("noscript",i,s),script:Q("script",m,s),style:Q("style",o,s),title:Q("title",{title:l,titleAttributes:c},s)}},Ht=ao,st=[],ms=!!(typeof window<"u"&&window.document&&window.document.createElement),Vt=class{constructor(t,e){ie(this,"instances",[]);ie(this,"canUseDOM",ms);ie(this,"context");ie(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?st:this.instances,add:t=>{(this.canUseDOM?st:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?st:this.instances).indexOf(t);(this.canUseDOM?st:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Ht({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},oo={},gs=ne.createContext(oo),we,vs=(we=class extends j.Component{constructor(r){super(r);ie(this,"helmetData");this.helmetData=new Vt(this.props.context||{},we.canUseDOM)}render(){return ne.createElement(gs.Provider,{value:this.helmetData.value},this.props.children)}},ie(we,"canUseDOM",ms),we),Ne=(t,e)=>{const r=document.head||document.querySelector("head"),s=r.querySelectorAll(`${t}[${re}]`),a=[].slice.call(s),i=[];let o;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")c.innerHTML=l.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const u=d,p=typeof l[u]>"u"?"":l[u];c.setAttribute(d,p)}c.setAttribute(re,"true"),a.some((d,u)=>(o=u,c.isEqualNode(d)))?a.splice(o,1):i.push(c)}),a.forEach(l=>l.parentNode?.removeChild(l)),i.forEach(l=>r.appendChild(l)),{oldTags:a,newTags:i}},Kt=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const s=r.getAttribute(re),a=s?s.split(","):[],i=[...a],o=Object.keys(e);for(const l of o){const c=e[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),a.indexOf(l)===-1&&a.push(l);const d=i.indexOf(l);d!==-1&&i.splice(d,1)}for(let l=i.length-1;l>=0;l-=1)r.removeAttribute(i[l]);a.length===i.length?r.removeAttribute(re):r.getAttribute(re)!==o.join(",")&&r.setAttribute(re,o.join(","))},lo=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=hs(t)),Kt("title",e)},Dr=(t,e)=>{const{baseTag:r,bodyAttributes:s,htmlAttributes:a,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:d,styleTags:u,title:p,titleAttributes:m}=t;Kt("body",s),Kt("html",a),lo(p,m);const h={baseTag:Ne("base",r),linkTags:Ne("link",i),metaTags:Ne("meta",o),noscriptTags:Ne("noscript",l),scriptTags:Ne("script",d),styleTags:Ne("style",u)},g={},f={};Object.keys(h).forEach(v=>{const{newTags:y,oldTags:x}=h[v];y.length&&(g[v]=y),x.length&&(f[v]=h[v].oldTags)}),e&&e(),c(t,g,f)},De=null,co=t=>{De&&cancelAnimationFrame(De),t.defer?De=requestAnimationFrame(()=>{Dr(t,()=>{De=null})}):(Dr(t),De=null)},uo=co,Br=class extends j.Component{constructor(){super(...arguments);ie(this,"rendered",!1)}shouldComponentUpdate(e){return!Va(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:r}=this.props.context;let s=null;const a=Za(e.get().map(i=>{const o={...i.props};return delete o.context,o}));vs.canUseDOM?uo(a):Ht&&(s=Ht(a)),r(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Ct,ho=(Ct=class extends j.Component{shouldComponentUpdate(t){return!Ma(Ur(this.props,"helmetData"),Ur(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,s){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,s)}]}}mapObjectTypeChildren(t,e,r,s){switch(t.type){case"title":return{...e,[t.type]:s,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(s=>{r={...r,[s]:t[s]}}),r}warnOnInvalidChildren(t,e){return Ir(Lr.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Lr.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Ir(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return ne.Children.forEach(t,s=>{if(!s||!s.props)return;const{children:a,...i}=s.props,o=Object.keys(i).reduce((c,d)=>(c[Ka[d]||d]=i[d],c),{});let{type:l}=s;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(s,a),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(s,r,o,a);break;default:e=this.mapObjectTypeChildren(s,e,o,a);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:s}=e;if(t&&(r=this.mapChildrenToProps(t,r)),s&&!(s instanceof Vt)){const a=s;s=new Vt(a.context,!0),delete r.helmetData}return s?ne.createElement(Br,{...r,context:s.value}):ne.createElement(gs.Consumer,null,a=>ne.createElement(Br,{...r,context:a}))}},ie(Ct,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Ct);const pe={siteName:"Allahu Akbar Shop",title:"Allahu Akbar Shop - Productos Premium Peruanos",description:"Tienda virtual con los mejores productos peruanos: ropa de algodn pima, artesanas, calzado y accesorios. Envos a todo el Per.",image:"/og-image.jpg",url:"https://allahuakbarshop.pe",locale:"es_PE"},fo=({title:t,description:e,image:r,url:s,type:a="website"})=>{const i=t?`${t} | ${pe.siteName}`:pe.title,o=e||pe.description,l=r||pe.image,c=s||pe.url;return n.jsxs(ho,{children:[n.jsx("title",{children:i}),n.jsx("meta",{name:"title",content:i}),n.jsx("meta",{name:"description",content:o}),n.jsx("meta",{name:"language",content:"es-PE"}),n.jsx("meta",{property:"og:type",content:a}),n.jsx("meta",{property:"og:url",content:c}),n.jsx("meta",{property:"og:title",content:i}),n.jsx("meta",{property:"og:description",content:o}),n.jsx("meta",{property:"og:image",content:l}),n.jsx("meta",{property:"og:locale",content:pe.locale}),n.jsx("meta",{property:"og:site_name",content:pe.siteName}),n.jsx("meta",{property:"twitter:card",content:"summary_large_image"}),n.jsx("meta",{property:"twitter:url",content:c}),n.jsx("meta",{property:"twitter:title",content:i}),n.jsx("meta",{property:"twitter:description",content:o}),n.jsx("meta",{property:"twitter:image",content:l}),n.jsx("meta",{name:"robots",content:"index, follow"}),n.jsx("meta",{name:"googlebot",content:"index, follow"}),n.jsx("link",{rel:"canonical",href:c}),n.jsx("meta",{name:"geo.region",content:"PE"}),n.jsx("meta",{name:"geo.placename",content:"Per"})]})},po=({children:t})=>n.jsx(vs,{children:t}),mo=()=>{const[t,e]=j.useState("bienvenida"),r=[{id:"bienvenida",label:"Bienvenida"},{id:"identificacion",label:"1. Identificacin del Vendedor"},{id:"objeto",label:"2. Objeto"},{id:"condiciones",label:"3. Condiciones de Uso y Compra"},{id:"proceso",label:"4. Proceso de Compra"},{id:"precios",label:"5. Precios y Modalidades de Pago"},{id:"envios",label:"6. Envos y Entregas"},{id:"cambios",label:"7. Poltica de Cambios y Devoluciones"},{id:"garantia",label:"8. Garanta de los Productos"},{id:"cupones",label:"9. Cupones y Descuentos"},{id:"propiedad",label:"10. Propiedad Intelectual"},{id:"proteccion",label:"11. Proteccin de Datos Personales"},{id:"atencion",label:"12. Atencin al Cliente"},{id:"modificacion",label:"13. Modificacin de los T&C"},{id:"legislacion",label:"14. Legislacin Aplicable"},{id:"contacto",label:"Contacto"}],s=a=>{e(a);const i=document.getElementById(a);i&&i.scrollIntoView({behavior:"smooth"})};return n.jsxs("div",{style:{fontFamily:"Arial, sans-serif",lineHeight:"1.6",color:"#333",maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[n.jsx("style",{children:`
                .sidebar-nav {
                    list-style: none;
                    padding: 0;
                    position: sticky;
                    top: 100px;
                }
                .sidebar-nav li {
                    margin-bottom: 5px;
                }
                .sidebar-nav a {
                    display: block;
                    padding: 8px 10px;
                    color: #2c3e50;
                    text-decoration: none;
                    border-left: 3px solid transparent;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                .sidebar-nav a:hover {
                    background-color: #f0f0f0;
                }
                .sidebar-nav a.active {
                    border-left: 3px solid #c2ab48;
                    background-color: #f9f6e7;
                    font-weight: bold;
                }
                section {
                    margin-bottom: 40px;
                    padding: 20px;
                    background-color: #fff;
                    border-radius: 5px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                }
                h2 {
                    color: #c2ab48;
                    margin-top: 0;
                    padding-bottom: 10px;
                    border-bottom: 1px solid #eee;
                    font-size: 1.5rem;
                }
                .info-box {
                    background-color: #e7f4ff;
                    padding: 15px;
                    border-left: 4px solid #3498db;
                    margin-bottom: 20px;
                }
                .highlight-box {
                    background-color: #fffde7;
                    padding: 15px;
                    border-left: 4px solid #ffc107;
                    margin-bottom: 20px;
                }
                @media (max-width: 768px) {
                    .container-flex {
                        flex-direction: column;
                    }
                    .sidebar {
                        flex: 1;
                        padding-right: 0 !important;
                        margin-bottom: 20px;
                    }
                    .sidebar-nav {
                        position: static;
                    }
                }
                `}),n.jsx("header",{style:{backgroundColor:"#f8f9fa",padding:"20px",marginBottom:"30px",borderBottom:"1px solid #ddd"},children:n.jsx("h1",{style:{color:"#2c3e50",margin:0},children:"Trminos y Condiciones - Allahu Akbar Peru"})}),n.jsxs("div",{className:"container-flex",style:{display:"flex",flexWrap:"wrap"},children:[n.jsx("aside",{className:"sidebar",style:{flex:"0 0 250px",paddingRight:"20px"},children:n.jsx("ul",{className:"sidebar-nav",children:r.map(a=>n.jsx("li",{children:n.jsx("a",{className:t===a.id?"active":"",onClick:()=>s(a.id),children:a.label})},a.id))})}),n.jsxs("main",{style:{flex:1},children:[n.jsxs("section",{id:"bienvenida",children:[n.jsx("h2",{children:"Bienvenida a Allahu Akbar Peru!"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Esta seccin introductoria da la bienvenida a los usuarios y establece el propsito de los Trminos y Condiciones. Aqu se explica que el uso de los servicios implica la aceptacin de estos trminos."})}),n.jsx("p",{children:'Los presentes Trminos y Condiciones (en adelante, "T&C") regulan el acceso y uso del sitio web www.allahuakbarperu.com (en adelante, el "Sitio Web"), as como la compra de productos ofrecidos en nuestra tienda fsica ubicada en Arequipa, Per, y a travs de nuestros canales de venta directa (por ejemplo, redes sociales, WhatsApp) (en adelante, conjuntamente, la "Tienda").'}),n.jsx("p",{children:'Al realizar una compra o utilizar nuestros servicios, usted (en adelante, el "Cliente" o "Usuario") declara haber ledo, entendido y aceptado en su totalidad los presentes T&C.'})]}),n.jsxs("section",{id:"identificacion",children:[n.jsx("h2",{children:"1. Identificacin del Vendedor"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Esta seccin proporciona la informacin legal y de contacto de la tienda. Es fundamental para la transparencia y para que los clientes sepan con quin estn tratando."})}),n.jsxs("p",{children:[n.jsx("strong",{children:"Razn Social:"})," Allahu Akbar Peru"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"RUC:"})," [Pendiente]"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Domicilio Fiscal:"})," Calle Los Arces, Arequipa, Per"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Tienda Fsica:"})," Calle Los Arces, Arequipa, Per"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Correo Electrnico:"})," alahuakbarperu@gmail.com"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Telfono de Contacto:"})," 123456789"]})]}),n.jsxs("section",{id:"objeto",children:[n.jsx("h2",{children:"2. Objeto"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Aqu se define el propsito principal de los Trminos y Condiciones: regular la relacin comercial entre la tienda y sus clientes respecto a la compra de productos."})}),n.jsx("p",{children:'El objeto de los presentes T&C es regular la relacin entre Allahu Akbar Peru y el Cliente en lo referente a la adquisicin de los productos de moda femenina (en adelante, los "Productos") ofrecidos por la Tienda.'})]}),n.jsxs("section",{id:"condiciones",children:[n.jsx("h2",{children:"3. Condiciones de Uso y Compra"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Este apartado detalla los requisitos para los clientes, como la mayora de edad y la veracidad de la informacin, as como el compromiso de usar los servicios adecuadamente."})}),n.jsxs("p",{children:[n.jsx("strong",{children:"Capacidad Legal"}),n.jsx("br",{}),"El Cliente declara ser mayor de edad y contar con la capacidad legal necesaria para contratar y obligarse segn estos T&C."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Veracidad de la Informacin"}),n.jsx("br",{}),"El Cliente se compromete a proporcionar informacin veraz, exacta y completa al momento de registrarse (si aplica) o realizar una compra."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Uso Adecuado"}),n.jsx("br",{}),"El Cliente se compromete a utilizar los servicios y Productos de la Tienda de conformidad con la ley peruana."]})]}),n.jsxs("section",{id:"proceso",children:[n.jsx("h2",{children:"4. Proceso de Compra"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Describe los pasos que sigue un cliente para adquirir un producto, desde la seleccin hasta la confirmacin del pedido, incluyendo la gestin de la disponibilidad de stock."})}),n.jsxs("p",{children:[n.jsx("strong",{children:"1. Seleccin de Productos:"})," El Cliente podr seleccionar los Productos de su inters disponibles en la Tienda."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"2. Disponibilidad:"})," Todos los pedidos estn sujetos a la disponibilidad de los Productos."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"3. Confirmacin del Pedido:"})," Una vez realizado el pedido y verificado el pago, Allahu Akbar Peru enviar una confirmacin al Cliente."]})]}),n.jsxs("section",{id:"precios",children:[n.jsx("h2",{children:"5. Precios y Modalidades de Pago"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Detalla cmo se establecen los precios (incluyendo IGV), el derecho a modificarlos, y las formas de pago aceptadas por la tienda, as como la emisin de comprobantes."})}),n.jsxs("p",{children:[n.jsx("strong",{children:"Precios:"})," Los precios de los Productos estn expresados en Soles (S/) e incluyen el Impuesto General a las Ventas (IGV)."]}),n.jsx("p",{children:n.jsx("strong",{children:"Modalidades de Pago Aceptadas:"})}),n.jsxs("ul",{children:[n.jsx("li",{children:"Efectivo (en tienda fsica)"}),n.jsx("li",{children:"Tarjetas (Visa, MasterCard, etc.)"}),n.jsx("li",{children:"Transferencia Bancaria"}),n.jsx("li",{children:"Billeteras (Yape, Plin)"})]})]}),n.jsxs("section",{id:"envios",children:[n.jsx("h2",{children:"6. Envos y Entregas"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Explica la poltica de envos: cobertura, costos, plazos estimados de entrega, responsabilidad sobre la direccin y el proceso de recepcin del pedido."})}),n.jsxs("p",{children:[n.jsx("strong",{children:"Cobertura:"})," Realizamos envos principalmente dentro de la ciudad de Arequipa. Para envos a otras provincias, por favor consultar."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Plazos de Entrega:"})," Arequipa Ciudad: 1-3 das hbiles una vez confirmado el pago."]})]}),n.jsxs("section",{id:"cambios",children:[n.jsx("h2",{children:"7. Poltica de Cambios y Devoluciones"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Una seccin crucial que detalla las condiciones para cambios de productos y devoluciones (solo por falla de fbrica)."})}),n.jsxs("div",{className:"highlight-box",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Cambios:"})," Se aceptan cambios de Productos por talla o por otro modelo dentro de los 7 das calendario siguientes a la fecha de compra."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Devoluciones:"})," Solo se aceptarn devoluciones de dinero en caso de que el Producto presente una falla de fbrica comprobada."]})]})]}),n.jsxs("section",{id:"garantia",children:[n.jsx("h2",{children:"8. Garanta de los Productos"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Informa sobre la garanta legal que cubre los productos contra defectos de fabricacin, segn la normativa peruana."})}),n.jsx("p",{children:"Los Productos ofrecidos por Allahu Akbar Peru cuentan con la garanta legal establecida por la normativa peruana de proteccin al consumidor."})]}),n.jsxs("section",{id:"cupones",children:[n.jsx("h2",{children:"9. Cupones y Descuentos"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Establece las reglas para el uso de cupones y promociones: validez, condiciones especficas, no canjeables por efectivo."})}),n.jsx("p",{children:"Los cupones de descuento y las promociones tendrn una vigencia especfica, la cual ser comunicada claramente al Cliente."})]}),n.jsxs("section",{id:"propiedad",children:[n.jsx("h2",{children:"10. Propiedad Intelectual"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Afirma los derechos de propiedad de la tienda sobre su contenido (logos, marcas, textos, etc.) y prohbe su uso no autorizado."})}),n.jsx("p",{children:"Todo el contenido de la Tienda, incluyendo logotipos, marcas, nombres comerciales e imgenes, es propiedad de Allahu Akbar Peru."})]}),n.jsxs("section",{id:"proteccion",children:[n.jsx("h2",{children:"11. Proteccin de Datos Personales"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Informa sobre el tratamiento de datos personales de los clientes conforme a la ley peruana (Ley N 29733)."})}),n.jsx("p",{children:"De conformidad con la Ley N 29733, los datos personales proporcionados por el Cliente sern incorporados a un banco de datos de titularidad de Allahu Akbar Peru."})]}),n.jsxs("section",{id:"atencion",children:[n.jsx("h2",{children:"12. Atencin al Cliente"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Proporciona los canales de contacto para consultas o reclamos y menciona la disponibilidad del Libro de Reclamaciones."})}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," alahuakbarperu@gmail.com"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"WhatsApp:"})," 123456789"]})]}),n.jsxs("section",{id:"modificacion",children:[n.jsx("h2",{children:"13. Modificacin de los T&C"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Indica que la tienda se reserva el derecho de cambiar los T&C."})}),n.jsx("p",{children:"Allahu Akbar Peru se reserva el derecho de modificar los presentes T&C en cualquier momento."})]}),n.jsxs("section",{id:"legislacion",children:[n.jsx("h2",{children:"14. Legislacin Aplicable"}),n.jsx("div",{className:"info-box",children:n.jsx("p",{children:"Establece que los T&C se rigen por las leyes peruanas."})}),n.jsx("p",{children:"Los presentes T&C se rigen e interpretan de acuerdo con las leyes de la Repblica del Per."})]}),n.jsxs("section",{id:"contacto",children:[n.jsx("h2",{children:"Contacto"}),n.jsx("p",{children:n.jsx("strong",{children:"Allahu Akbar Peru"})}),n.jsx("p",{children:"Calle Los Arces, Arequipa, Per"}),n.jsx("p",{children:"Email: alahuakbarperu@gmail.com"}),n.jsx("p",{children:"Telfono: 123456789"}),n.jsx("p",{className:"highlight-box",style:{textAlign:"center",marginTop:"20px"},children:"Gracias por elegir Allahu Akbar Peru!"})]})]})]}),n.jsxs("footer",{style:{marginTop:"50px",padding:"20px",textAlign:"center",backgroundColor:"#f8f9fa",borderTop:"1px solid #ddd"},children:[n.jsx("p",{children:" Allahu Akbar Peru. Todos los derechos reservados."}),n.jsx("p",{style:{fontSize:"0.8rem",color:"#777"},children:"Aplicacin interactiva de Trminos y Condiciones para facilitar la comprensin."})]})]})},go=()=>{const{showToast:t}=cs(),[e,r]=j.useState({nombre:"",primerApellido:"",segundoApellido:"",tipoDoc:"",numDoc:"",celular:"",departamento:"",provincia:"",distrito:"",direccion:"",referencia:"",email:"",menorEdad:"no",tipoReclamo:"",tipoConsumo:"producto",numPedido:"",fechaReclamo:new Date().toISOString().split("T")[0],proveedor:"Allahu Akbar Peru",montoReclamado:"",descripcionProducto:"",fechaCompra:"",fechaConsumo:"",fechaCaducidad:"",detalleReclamo:"",pedidoCliente:"",aceptoDeclaracion:!1,aceptoPolitica:!1}),s=c=>{const{name:d,value:u,type:p}=c.target;if(p==="checkbox"){const m=c.target.checked;r(h=>({...h,[d]:m}))}else r(m=>({...m,[d]:u}))},a=c=>{if(c.preventDefault(),!e.aceptoDeclaracion||!e.aceptoPolitica){t("error","Debe aceptar los trminos y la declaracin jurada.");return}t("success","Reclamo enviado correctamente. Nos pondremos en contacto a la brevedad.")},i="block text-xs font-bold text-gray-700 mb-1",o="w-full px-3 py-2 border border-gray-300 rounded focus:ring-1 focus:ring-gold-500 focus:border-gold-500 outline-none text-sm transition-all",l="text-xl font-bold text-gray-800 mb-6 border-b pb-2 border-red-500 flex items-center";return n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 bg-gray-50 min-h-screen",children:[n.jsxs("div",{className:"bg-white p-8 shadow-lg border border-gray-200 rounded-sm",children:[n.jsx("div",{className:"flex justify-between items-start mb-10",children:n.jsx("div",{className:"flex items-center gap-4",children:n.jsx("div",{className:"w-16 h-16 bg-gold-100 flex items-center justify-center rounded-sm",children:n.jsxs("span",{className:"text-gold-600 font-serif font-bold text-xl italic text-center leading-tight",children:["Allahu",n.jsx("br",{}),"Akbar"]})})})}),n.jsxs("form",{onSubmit:a,className:"space-y-8",children:[n.jsxs("section",{children:[n.jsxs("h2",{className:l,children:["Identificacin Del Consumidor Reclamante ",n.jsx("span",{className:"text-red-500 text-xs ml-2 font-normal",children:"* Datos Requeridos"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Nombre *"}),n.jsx("input",{type:"text",name:"nombre",value:e.nombre,onChange:s,className:o,placeholder:"Nombre",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Primer apellido *"}),n.jsx("input",{type:"text",name:"primerApellido",value:e.primerApellido,onChange:s,className:o,placeholder:"Primer apellido",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Segundo apellido *"}),n.jsx("input",{type:"text",name:"segundoApellido",value:e.segundoApellido,onChange:s,className:o,placeholder:"Segundo apellido",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Tipo de documentacin *"}),n.jsxs("select",{name:"tipoDoc",value:e.tipoDoc,onChange:s,className:o,required:!0,children:[n.jsx("option",{value:"",children:"Seleccin de documentacin"}),n.jsx("option",{value:"DNI",children:"DNI"}),n.jsx("option",{value:"CE",children:"C.E."}),n.jsx("option",{value:"Pasaporte",children:"Pasaporte"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Nmero de documentacin *"}),n.jsx("input",{type:"text",name:"numDoc",value:e.numDoc,onChange:s,className:o,placeholder:"Nmero de documentacin",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Celular *"}),n.jsx("input",{type:"tel",name:"celular",value:e.celular,onChange:s,className:o,placeholder:"Celular",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Departamento *"}),n.jsxs("select",{name:"departamento",value:e.departamento,onChange:s,className:o,required:!0,children:[n.jsx("option",{value:"",children:"Seleccin departamento"}),n.jsx("option",{value:"Arequipa",children:"Arequipa"}),n.jsx("option",{value:"Lima",children:"Lima"}),n.jsx("option",{value:"Cusco",children:"Cusco"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Provincia *"}),n.jsxs("select",{name:"provincia",value:e.provincia,onChange:s,className:o,required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar de provincia"}),n.jsx("option",{value:"Arequipa",children:"Arequipa"}),n.jsx("option",{value:"Islay",children:"Islay"}),n.jsx("option",{value:"Caylloma",children:"Caylloma"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Distrito *"}),n.jsxs("select",{name:"distrito",value:e.distrito,onChange:s,className:o,required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar de distrito"}),n.jsx("option",{value:"Cercado",children:"Arequipa (Cercado)"}),n.jsx("option",{value:"Yanahuara",children:"Yanahuara"}),n.jsx("option",{value:"Cayma",children:"Cayma"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Direccin *"}),n.jsx("input",{type:"text",name:"direccion",value:e.direccion,onChange:s,className:o,placeholder:"Direccin",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Referencia"}),n.jsx("input",{type:"text",name:"referencia",value:e.referencia,onChange:s,className:o,placeholder:"Referencia"})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Correo electrnico *"}),n.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,className:o,placeholder:"Correo electrnico",required:!0})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-6",children:[n.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Eres menor de edad?"}),n.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[n.jsx("input",{type:"radio",name:"menorEdad",value:"si",checked:e.menorEdad==="si",onChange:s})," Si"]}),n.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[n.jsx("input",{type:"radio",name:"menorEdad",value:"no",checked:e.menorEdad==="no",onChange:s})," No"]})]})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:l,children:["Detalle Del Reclamo Y Orden Del Consumidor ",n.jsx("span",{className:"text-red-500 text-xs ml-2 font-normal",children:"* datos requeridos"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Tipo de reclamo *"}),n.jsxs("select",{name:"tipoReclamo",value:e.tipoReclamo,onChange:s,className:o,required:!0,children:[n.jsx("option",{value:"",children:"Tipo de reclamo"}),n.jsx("option",{value:"Reclamacion",children:"Reclamacin"}),n.jsx("option",{value:"Queja",children:"Queja"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Tipo de consumo *"}),n.jsxs("select",{name:"tipoConsumo",value:e.tipoConsumo,onChange:s,className:o,required:!0,children:[n.jsx("option",{value:"producto",children:"Producto"}),n.jsx("option",{value:"servicio",children:"Servicio"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"N de pedido *"}),n.jsx("input",{type:"text",name:"numPedido",value:e.numPedido,onChange:s,className:o,placeholder:"N Pedido",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Fecha de reclamacin / queja"}),n.jsx("input",{type:"date",name:"fechaReclamo",value:e.fechaReclamo,onChange:s,className:o})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Proveedor"}),n.jsx("input",{type:"text",name:"proveedor",value:e.proveedor,className:`${o} bg-gray-100`,readOnly:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Monto reclamado (S/.)"}),n.jsx("input",{type:"text",name:"montoReclamado",value:e.montoReclamado,onChange:s,className:o,placeholder:"Monto reclamado"})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:i,children:"Descripcin del producto o servicio *"}),n.jsx("textarea",{name:"descripcionProducto",value:e.descripcionProducto,onChange:s,className:`${o} h-20`,required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Fecha de compra"}),n.jsx("input",{type:"date",name:"fechaCompra",value:e.fechaCompra,onChange:s,className:o})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Fecha de consumo"}),n.jsx("input",{type:"date",name:"fechaConsumo",value:e.fechaConsumo,onChange:s,className:o})]}),n.jsxs("div",{children:[n.jsx("label",{className:i,children:"Fecha de caducidad"}),n.jsx("input",{type:"date",name:"fechaCaducidad",value:e.fechaCaducidad,onChange:s,className:o})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:i,children:"Detalle de la Reclamacin / Queja, segn lo indicado por el cliente: *"}),n.jsx("textarea",{name:"detalleReclamo",value:e.detalleReclamo,onChange:s,className:`${o} h-24`,required:!0})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:i,children:"Pedido del Cliente: *"}),n.jsx("textarea",{name:"pedidoCliente",value:e.pedidoCliente,onChange:s,className:`${o} h-24`,required:!0})]})]}),n.jsxs("div",{className:"text-[10px] text-gray-500 space-y-1",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"(1) Reclamacin:"})," Desacuerdo relacionado con productos y/o servicios."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"(2) Queja:"})," Desacuerdo no relacionado con productos y/o servicios; o, malestar o insatisfaccin con la atencin al pblico."]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",name:"aceptoDeclaracion",checked:e.aceptoDeclaracion,onChange:s,className:"mt-1 w-4 h-4 text-gold-600 rounded border-gray-300 focus:ring-gold-500",required:!0}),n.jsxs("div",{className:"text-[10px] text-gray-600",children:[n.jsx("p",{className:"font-bold mb-1",children:"Declaro que soy el dueo del servicio y acepto el contenido de este formulario al declarar bajo Declaracin Jurada la veracidad de los hechos descritos."}),n.jsx("p",{className:"italic",children:"* La formulacin del reclamo no excluye al recurso a otros medios de resolucin de controversias ni es un requisito previo para presentar una denuncia ante el Indecopi."}),n.jsx("p",{className:"italic",children:"* El proveedor debe responder a la reclamacin en un plazo no superior a quince (15) das naturales, pudiendo ampliar el plazo hasta quince das ms."})]})]}),n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",name:"aceptoPolitica",checked:e.aceptoPolitica,onChange:s,className:"w-4 h-4 text-gold-600 rounded border-gray-300 focus:ring-gold-500",required:!0}),n.jsx("span",{className:"text-[10px] text-gray-600 font-bold",children:"He ledo y acepto la Poltica de privacidad y seguridad y la Poltica de cookies."})]})]}),n.jsx("button",{type:"submit",className:"w-full bg-black text-white py-4 rounded-full font-bold uppercase tracking-widest hover:bg-gold-600 transition-colors shadow-lg",children:"Enviar"})]})]}),n.jsx("div",{className:"mt-8 flex flex-col items-center",children:n.jsxs("div",{className:"border-2 border-blue-600 p-2 flex items-center gap-2",children:[n.jsxs("span",{className:"text-blue-600 font-black text-xl leading-none",children:["LIBRO DE ",n.jsx("br",{})," RECLAMACIONES"]}),n.jsx("div",{className:"bg-blue-600 p-1",children:n.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]})})]})},vo=()=>n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-[#0f1c29] mb-6",children:"Sobre Nosotros"}),n.jsxs("div",{className:"prose prose-lg text-[#3c6e96]",children:[n.jsxs("p",{className:"mb-4",children:["Bienvenidos a ",n.jsx("span",{className:"font-bold text-[#0f1c29]",children:"Allahu Akbar Shop"}),", una tienda virtual hbrida que fusiona la riqueza de la tradicin peruana con la modernidad del comercio electrnico global."]}),n.jsx("p",{className:"mb-4",children:"Nuestra misin es llevar la calidad peruana a cada rincn del pas y del mundo, ofreciendo una seleccin curada de tecnologa, moda y artesana. Creemos en el poder de la identidad y la elegancia."}),n.jsx("p",{children:"Ms que una tienda, somos un punto de encuentro donde la excelencia es la norma. Gracias por elegirnos como su destino de compras preferido."})]})]}),n.jsxs("div",{className:"bg-stone-100 h-96 rounded-lg flex items-center justify-center relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-[#0f1c29] to-transparent opacity-20"}),n.jsx("span",{className:"text-[#0f1c29] font-serif italic text-2xl z-10",children:"Excelencia Peruana"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center bg-white p-12 rounded-xl shadow-sm border border-stone-50",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gold-500 text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-[#0f1c29] mb-2",children:"Calidad Premium"}),n.jsx("p",{className:"text-[#3c6e96]",children:"Productos seleccionados rigurosamente para garantizar la mejor experiencia."})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gold-500 text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-[#0f1c29] mb-2",children:"Envos Rpidos"}),n.jsx("p",{className:"text-[#3c6e96]",children:"Logstica eficiente para que reciba su pedido lo antes posible."})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gold-500 text-4xl mb-4",children:""}),n.jsx("h3",{className:"text-xl font-bold text-[#0f1c29] mb-2",children:"Atencin Personalizada"}),n.jsx("p",{className:"text-[#3c6e96]",children:"Estamos aqu para escucharlo y atender todas sus necesidades."})]})]})]}),bo=()=>n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-[#0f1c29] mb-8 text-center",children:"Nuestras Campaas"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-[#0f1c29] h-[400px] shadow-lg",children:[n.jsx("img",{src:"https://images.unsplash.com/photo-1607083206868-24c3305275ef?q=80&w=2070&auto=format&fit=crop",alt:"Campaa Verano",className:"absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity duration-300"}),n.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-8",children:[n.jsx("span",{className:"text-gold-400 font-bold tracking-widest uppercase text-sm mb-2",children:"Temporada 2024"}),n.jsx("h2",{className:"text-3xl font-serif font-bold text-white mb-4",children:"Verano de Lujo"}),n.jsx("p",{className:"text-gray-300 mb-6 max-w-md",children:"Descubre nuestra coleccin exclusiva de verano con descuentos de hasta el 30% en prendas seleccionadas."}),n.jsx(H,{to:"/shop",className:"inline-block w-fit px-6 py-3 bg-gold-500 text-[#0f1c29] font-bold rounded hover:bg-white transition-colors",children:"Ver Coleccin"})]})]}),n.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-stone-800 h-[400px] shadow-lg",children:[n.jsx("img",{src:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?q=80&w=2070&auto=format&fit=crop",alt:"Campaa Tech",className:"absolute inset-0 w-full h-full object-cover opacity-60 group-hover:opacity-40 transition-opacity duration-300"}),n.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-8",children:[n.jsx("span",{className:"text-gold-400 font-bold tracking-widest uppercase text-sm mb-2",children:"Tecnologa"}),n.jsx("h2",{className:"text-3xl font-serif font-bold text-white mb-4",children:"Cyber Days"}),n.jsx("p",{className:"text-gray-300 mb-6 max-w-md",children:"La mejor tecnologa a precios increbles. Renovamos tu oficina o setup gamer con ofertas imperdibles."}),n.jsx(H,{to:"/shop",className:"inline-block w-fit px-6 py-3 bg-transparent border-2 border-white text-white font-bold rounded hover:bg-white hover:text-[#0f1c29] transition-colors",children:"Explorar Ofertas"})]})]})]}),n.jsx("div",{className:"mt-16 text-center",children:n.jsx("p",{className:"text-[#3c6e96] italic",children:"Mantente atento a nuestras prximas campaas suscribindote a nuestro boletn."})})]}),yo=j.lazy(()=>Ge(()=>import("./AdminPanel-DzMjNFOr.js"),__vite__mapDeps([0,1,2,3,4,5]))),xo=j.lazy(()=>Ge(()=>import("./AdminLoginPage-BzKfF0oL.js"),__vite__mapDeps([6,1,5])).then(t=>({default:t.AdminLoginPage}))),wo=j.lazy(()=>Ge(()=>import("./UserPanel-D-qpBVfF.js"),__vite__mapDeps([7,1,2,3,5]))),_o=j.lazy(()=>Ge(()=>import("./CheckoutPage-kaBZ1Xke.js"),__vite__mapDeps([8,1,2,5])).then(t=>({default:t.CheckoutPage}))),jo=j.lazy(()=>Ge(()=>import("./ResetPasswordPage-M7gcKbz1.js"),__vite__mapDeps([9,1,5])).then(t=>({default:t.ResetPasswordPage}))),ce=({to:t,children:e,onClick:r})=>{const a=Ts().pathname===t;return n.jsx(H,{to:t,onClick:r,className:a?N.navLink.active:N.navLink.inactive,children:e})},ko=({cartCount:t,onOpenCart:e,isAuthenticated:r,isAdmin:s,onLogout:a,onShowLogin:i})=>{const[o,l]=j.useState(!1);return n.jsxs("nav",{className:N.navbar.container,children:[n.jsx("div",{className:N.navbar.wrapper,children:n.jsxs("div",{className:N.navbar.content,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsxs(H,{to:"/",className:N.navbar.brand,children:["ALLAHU AKBAR ",n.jsx("span",{className:N.navbar.brandHighlight,children:"SHOP"})]}),n.jsxs("div",{className:N.navbar.desktopMenu,children:[n.jsx(ce,{to:"/",children:"Inicio"}),n.jsx(ce,{to:"/shop",children:"Tienda"}),n.jsx(ce,{to:"/campaigns",children:"Campaa"}),s&&n.jsx(ce,{to:"/admin",children:"Admin"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[r?n.jsxs(H,{to:"/profile",className:N.navbar.iconButton,children:[n.jsx("span",{className:"sr-only",children:"Perfil"}),n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})]}):n.jsxs("button",{onClick:i,className:N.navbar.iconButton,children:[n.jsx("span",{className:"sr-only",children:"Iniciar Sesin"}),n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})]}),r&&n.jsxs("button",{onClick:a,className:N.navbar.iconButton,title:"Cerrar Sesin",children:[n.jsx("span",{className:"sr-only",children:"Cerrar Sesin"}),n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})]}),n.jsxs("button",{onClick:e,className:N.navbar.cartButton,children:[n.jsx("span",{className:"sr-only",children:"Ver carrito"}),n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),t>0&&n.jsx("span",{className:N.navbar.cartCount,children:t})]}),n.jsx("div",{className:"md:hidden ml-2",children:n.jsx("button",{onClick:()=>l(!o),className:N.navbar.mobileMenuBtn,children:o?n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):n.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]})]})}),o&&n.jsx("div",{className:N.mobileMenu.container,children:n.jsxs("div",{className:N.mobileMenu.content,children:[n.jsx(ce,{to:"/",onClick:()=>l(!1),children:"Inicio"}),n.jsx(ce,{to:"/shop",onClick:()=>l(!1),children:"Tienda"}),n.jsx(ce,{to:"/campaigns",onClick:()=>l(!1),children:"Campaa"}),s&&n.jsx(ce,{to:"/admin",onClick:()=>l(!1),children:"Admin"})]})})]})},So=({products:t,loading:e,addToCart:r})=>{const[s]=Es(),a=s.get("search")||"",[i,o]=j.useState({searchQuery:a,selectedCategories:[],priceRange:[0,1e3],selectedSizes:[],selectedColors:[]}),[l,c]=j.useState(null);j.useEffect(()=>{const f=s.get("search");f!==null&&f!==i.searchQuery&&o(v=>({...v,searchQuery:f}))},[s]);const d=Array.from(new Set(t.map(f=>f.category))),u=t.length>0?Math.max(...t.map(f=>f.price)):300,p=Array.from(new Set(t.flatMap(f=>f.sizes||[]))),m=Array.from(new Set(t.flatMap(f=>f.colors||[]))),h=t.filter(f=>!(i.searchQuery&&!f.name.toLowerCase().includes(i.searchQuery.toLowerCase())||i.selectedCategories.length>0&&!i.selectedCategories.includes(f.category)||i.selectedSizes.length>0&&(!f.sizes||!f.sizes.some(v=>i.selectedSizes.includes(v)))||i.selectedColors.length>0&&(!f.colors||!f.colors.some(v=>i.selectedColors.includes(v)))||f.price<i.priceRange[0]||f.price>i.priceRange[1])),g=(f,v=1)=>{for(let y=0;y<v;y++)r(f)};return e?n.jsx("div",{className:"flex justify-center items-center py-20",children:n.jsx(ds,{text:"Cargando productos..."})}):n.jsxs("div",{className:N.storefront.container,children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:N.storefront.title,children:"Catlogo Completo"}),n.jsx("p",{className:N.storefront.subtitle,children:"Explora los mejores productos peruanos a un click de distancia."})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[n.jsx("aside",{className:"w-full lg:w-64 flex-shrink-0",children:n.jsx(La,{filters:i,onFilterChange:o,categories:d,maxPrice:u,availableSizes:p,availableColors:m})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:N.storefront.grid,children:h.map(f=>n.jsx(Mt,{product:f,onAddToCart:r,onViewProduct:c},f.id))}),h.length===0&&n.jsxs("div",{className:"py-12",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsx("p",{className:"text-stone-500 text-lg font-medium",children:"No se encontraron productos con estos filtros"})}),n.jsxs("div",{className:"mt-8 pt-8 border-t border-stone-200",children:[n.jsx("h3",{className:"text-2xl font-serif text-[#0f1c29] mb-6 text-center",children:"Productos que te podran gustar"}),n.jsx("div",{className:N.storefront.grid,children:t.slice(0,8).map(f=>n.jsx(Mt,{product:f,onAddToCart:r,onViewProduct:c},f.id))})]})]})]})]}),n.jsx(is,{product:l,products:t,isOpen:l!==null,onClose:()=>c(null),onAddToCart:g,onSwitchProduct:c})]})},Eo=()=>{const{items:t,isOpen:e,openCart:r,closeCart:s,addItem:a,removeItem:i,clearCart:o,getTotalItems:l}=os(),{user:c,isLoading:d,isInitialized:u,initialize:p,signIn:m,signOut:h}=Ft(),g=c!==null,f=c?.role==="admin",[v,y]=j.useState(!1),[x,b]=j.useState([]),[w,A]=j.useState(!0);j.useEffect(()=>{p()},[p]),j.useEffect(()=>{(async()=>{try{A(!0);const Qe=await ba();b(Qe)}catch{}finally{A(!1)}})()},[]);const E=async(se,Qe)=>{Ft.getState().user?.role==="admin"&&(await h(),await new Promise(ys=>setTimeout(ys,300)));const tr=await m(se,Qe);tr.success?(y(!1),window.location.hash="#/profile"):alert(tr.error||"Error al iniciar sesin")},O=async()=>{await h()},J=se=>{a(se)},R=l();return n.jsx(ks,{children:n.jsx(po,{children:n.jsxs(Oa,{children:[n.jsx(fo,{}),n.jsxs("div",{className:N.app.container,children:[n.jsx(ko,{cartCount:R,onOpenCart:r,isAuthenticated:g,isAdmin:f,onLogout:O,onShowLogin:()=>y(!0)}),n.jsx("main",{className:"flex-grow",children:n.jsx(j.Suspense,{fallback:n.jsx(ds,{text:"Cargando..."}),children:n.jsxs(Ss,{children:[n.jsx(Y,{path:"/",element:n.jsx(Ca,{})}),n.jsx(Y,{path:"/shop",element:n.jsx(So,{products:x,loading:w,addToCart:J})}),n.jsx(Y,{path:"/admin-login",element:n.jsx(xo,{})}),n.jsx(Y,{path:"/admin",element:f?n.jsx(yo,{}):n.jsx(rr,{to:"/",replace:!0})}),n.jsx(Y,{path:"/profile",element:g?n.jsx(wo,{cart:t}):n.jsx(rr,{to:"/",replace:!0})}),n.jsx(Y,{path:"/reset-password",element:n.jsx(jo,{})}),n.jsx(Y,{path:"/checkout",element:n.jsx(_o,{cart:t.map(se=>({product:se,quantity:se.quantity})),onClearCart:o,isAuthenticated:g,onShowLogin:()=>y(!0)})}),n.jsx(Y,{path:"/terms",element:n.jsx(mo,{})}),n.jsx(Y,{path:"/complaints",element:n.jsx(go,{})}),n.jsx(Y,{path:"/about",element:n.jsx(vo,{})}),n.jsx(Y,{path:"/campaigns",element:n.jsx(bo,{})}),n.jsx(Y,{path:"*",element:n.jsx(Ua,{})})]})})}),n.jsx(Sa,{isOpen:e,onClose:s,cart:t,onRemove:i}),n.jsx("footer",{className:N.footer.container,children:n.jsxs("div",{className:N.footer.wrapper,children:[n.jsxs("div",{className:N.footer.grid,children:[n.jsxs("div",{children:[n.jsx("h3",{className:N.footer.title,children:"Legales"}),n.jsxs("ul",{className:N.footer.list,children:[n.jsx("li",{children:n.jsx(H,{to:"/terms",className:N.footer.link,children:"Trminos y Condiciones"})}),n.jsx("li",{children:n.jsx(H,{to:"/complaints",className:N.footer.link,children:"Libro de Reclamaciones"})}),n.jsx("li",{className:"mt-4",children:n.jsx(H,{to:"/complaints",children:n.jsx("img",{src:"https://www.indecopi.gob.pe/documents/20182/227448/libro-de-reclamaciones-v2.png",alt:"Libro de Reclamaciones",className:"h-12 bg-white p-1 rounded"})})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:N.footer.title,children:"Sobre Nosotros"}),n.jsxs("ul",{className:N.footer.list,children:[n.jsx("li",{children:n.jsx(H,{to:"/about",className:N.footer.link,children:"Nuestra misin"})}),n.jsx("li",{children:n.jsx(H,{to:"/campaigns",className:N.footer.link,children:"Campaas"})}),n.jsx("li",{children:n.jsx(H,{to:"/shop",className:N.footer.link,children:"Tienda"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:N.footer.title,children:"Redes Sociales"}),n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx("a",{href:"https://tiktok.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/10 p-2 rounded-full hover:bg-gold-500 hover:text-black transition-all",children:n.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1.04-.1z"})})}),n.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/10 p-2 rounded-full hover:bg-gold-500 hover:text-black transition-all",children:n.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"})})}),n.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/10 p-2 rounded-full hover:bg-gold-500 hover:text-black transition-all",children:n.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),n.jsx("a",{href:"mailto:alahuakbarperu@gmail.com",className:"bg-white/10 p-2 rounded-full hover:bg-gold-500 hover:text-black transition-all",children:n.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})})]})]})]}),n.jsx("div",{className:N.footer.copyright,children:" 2026 Allahu Akbar Peru. Todos los derechos reservados."})]})}),n.jsx("a",{href:"https://wa.me/123456789?text=Hola!%20Deseo%20informacin%20sobre%20tus%20productos",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 z-50 bg-[#25d366] text-white p-4 rounded-full shadow-2xl hover:scale-110 active:scale-95 transition-all animate-bounce-slow",title:"Soporte WhatsApp",children:n.jsx("svg",{className:"h-8 w-8",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.246 2.248 3.484 5.232 3.483 8.412-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.308 1.655zm6.757-4.041c1.558.924 3.01 1.393 4.586 1.394 5.42 0 9.832-4.412 9.834-9.832.001-2.628-1.023-5.097-2.887-6.962s-4.332-2.891-6.96-2.892c-5.421 0-9.833 4.412-9.835 9.832-.001 1.737.478 3.43 1.385 4.911l-.985 3.593 3.682-.966zm10.707-1.391c-.24-.12-.1.417-2.427-4.108-.239-.12-.413-.18-.594-.18-.18 0-.362.06-.66.36s-.72.84-.87 1.02-.33.21-.57.09c-1.121-.555-1.921-1.077-2.684-2.383-.21-.36.21-.33.6-.96.12-.24.06-.45-.03-.63s-.782-1.884-1.071-2.583c-.282-.676-.569-.584-.781-.595-.201-.01-.432-.012-.662-.012s-.6.09-.913.437c-.313.348-1.196 1.168-1.196 2.848s1.229 3.297 1.402 3.526c.172.228 2.417 3.692 5.857 5.176 2.046.884 2.809 1.01 3.81 1.02.585.006 1.129.01 1.64.015.424.004.795.008 1.107.01.21-.001.42-.002.63-.004s.42-.005.63-.01c.21-.005.42-.01.63-.015.21-.005.42-.012.63-.02.21-.008.42-.018.63-.03.21-.012.42-.026.63-.04s.42-.032.63-.05c.21-.018.42-.038.63-.06s.42-.045.63-.07c.21-.025.42-.05.63-.08s.42-.06.63-.09.42-.065.63-.1c.21-.035.42-.07.63-.11s.42-.08.63-.12.42-.09.63-.14c.21-.05.42-.1.63-.15.21-.05.42-.1.63-.16.21-.06.417-.123.6-.183.18-.06.313-.105.347-.113.111-.027.234-.147.234-.347v-.55z"})})}),n.jsx($a,{isOpen:v,onClose:()=>y(!1),onLogin:E,onForgotPassword:()=>{y(!1),window.location.hash="#/reset-password"}})]})]})})})},N={app:{container:"min-h-screen bg-bone flex flex-col font-sans text-[#0f1c29]"},navLink:{active:"px-2 py-1 border-b-2 border-gold-500 text-[#0f1c29] font-serif font-bold italic transition-all",inactive:"px-2 py-1 border-b-2 border-transparent text-[#3c6e96] hover:text-[#0f1c29] transition-all font-medium"},navbar:{container:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-stone-100 shadow-sm",wrapper:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",content:"flex items-center justify-between h-20",brand:"text-[#0f1c29] font-serif font-bold text-2xl tracking-tighter flex items-center gap-1",brandHighlight:"text-gold-500 italic",desktopMenu:"hidden md:flex ml-12 items-center gap-8",iconButton:"p-2 rounded-full text-[#3c6e96] hover:text-[#0f1c29] hover:bg-stone-50 transition-all",cartButton:"p-2 rounded-full text-[#3c6e96] hover:text-[#0f1c29] hover:bg-stone-50 transition-all relative",cartCount:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-[10px] font-bold text-white bg-gold-500 rounded-full",mobileMenuBtn:"p-2 rounded-full text-[#0f1c29] hover:bg-stone-50"},mobileMenu:{container:"md:hidden bg-white border-t border-stone-100",content:"px-4 pt-3 pb-4 space-y-1 flex flex-col"},storefront:{container:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",title:"text-4xl md:text-5xl font-serif font-bold text-[#0f1c29] mb-2",subtitle:"text-[#3c6e96] font-light",grid:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"},footer:{container:"bg-[#0f1c29] text-white mt-auto pt-16 pb-8",wrapper:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",grid:"grid grid-cols-1 md:grid-cols-3 gap-12 mb-12",title:"font-serif text-xl italic text-gold-400 mb-6",list:"text-sm text-[#a6c2e0] space-y-3 font-light",link:"hover:text-gold-400 transition-colors",copyright:"border-t border-[#1e3850] pt-8 text-center text-xs text-[#7fa6c8] uppercase tracking-widest"}},bs=document.getElementById("root");if(!bs)throw new Error("Could not find root element to mount to");const To=Rs.createRoot(bs);To.render(n.jsx(ne.StrictMode,{children:n.jsx(Eo,{})}));export{Ye as B,Ft as a,cs as b,xe as f,ba as g,ga as h,ye as i,n as j,U as s,Ro as u};
